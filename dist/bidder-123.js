(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{47:function(e,r,t){"use strict";t.r(r),t.d(r,"spec",(function(){return x}));var n=t(277),i=t(278),a=t(279);function o(){return(o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function s(){var e=u(["dcn=","&pos=","&cmd=bid",""]);return s=function(){return e},e}function c(){var e=u(["","/bidRequest?"]);return c=function(){return e},e}function d(){var e=u(["","/pubapi/3.0/","/","/","/","/ADTECH;v=2;cmd=bid;cors=yes;alias=",";misc=",";",""]);return d=function(){return e},e}function u(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var p="aol",l="onemobile",m="onedisplay",f={GET:"display-get"},b={GET:"mobile-get",POST:"mobile-post"},h={TAG:"iframe",TYPE:"iframe"},v={TAG:"img",TYPE:"image"},g=w(d(),"host","network","placement","pageid","sizeid","alias","misc","dynamicParams"),y=w(c(),"host"),O=w(s(),"dcn","pos","dynamicParams"),P={us:"adserver-us.adtech.advertising.com",eu:"adserver-eu.adtech.advertising.com",as:"adserver-as.adtech.advertising.com"},T=1;function w(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),i=1;i<r;i++)t[i-1]=arguments[i];return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i[i.length-1]||{},s=[e[0]];return t.forEach((function(r,t){var a=n.isInteger(r)?i[r]:o[r];s.push(a,e[t+1])})),s.join("")}}function E(e){return e===p||e===l}function C(e){if(E(e.bidder)&&e.params.id&&e.params.imp&&e.params.imp[0]){var r=e.params.imp[0];return r.id&&r.tagid&&(r.banner&&r.banner.w&&r.banner.h||r.video&&r.video.mimes&&r.video.minduration&&r.video.maxduration)}}function S(e){return E(e.bidder)&&e.params.dcn&&e.params.pos}function R(e){return((r=e.bidder)===p||r===m)&&e.params.placement&&e.params.network;var r}var x={code:p,aliases:[l,m],supportedMediaTypes:[a.b],isBidRequestValid:function(e){return R(e)||function(e){return S(e)||C(e)}(e)},buildRequests:function(e,r){var t=this,n={};return r&&(n.gdpr=r.gdprConsent,n.uspConsent=r.uspConsent),e.map((function(e){var r=function(e){return S(e)?b.GET:C(e)?b.POST:R(e)?f.GET:void 0}(e);if(r)return t.formatBidRequest(r,e,n)}))},interpretResponse:function(e,r){var t=e.body;if(t){var i=this._parseBidResponse(t,r);if(i)return i}else n.logError("Empty bid response",r.bidderCode,t)},getUserSyncs:function(e,r){var t=!n.isEmpty(r)&&r[0].body;return t&&t.ext&&t.ext.pixels?this.parsePixelItems(t.ext.pixels):[]},formatBidRequest:function(e,r,t){var n;switch(e){case f.GET:n={url:this.buildMarketplaceUrl(r,t),method:"GET",ttl:60};break;case b.GET:n={url:this.buildOneMobileGetUrl(r,t),method:"GET",ttl:3600};break;case b.POST:n={url:this.buildOneMobileBaseUrl(r),method:"POST",ttl:3600,data:this.buildOpenRtbRequestData(r,t),options:{contentType:"application/json",customHeaders:{"x-openrtb-version":"2.2"}}}}return n.bidderCode=r.bidder,n.bidId=r.bidId,n.userSyncOn=r.params.userSyncOn,n},buildMarketplaceUrl:function(e,r){var t,i=e.params,a=i.server,o=i.region||"us";return P.hasOwnProperty(o)||(n.logWarn("Unknown region '".concat(o,"' for AOL bidder.")),o="us"),t=a||P[o],i.region=o,this.applyProtocol(g({host:t,network:i.network,placement:parseInt(i.placement),pageid:i.pageId||0,sizeid:i.sizeId||0,alias:i.alias||n.getUniqueIdentifierStr(),misc:(new Date).getTime(),dynamicParams:this.formatMarketplaceDynamicParams(i,r)}))},buildOneMobileGetUrl:function(e,r){var t=e.params,n=t.dcn,i=t.pos,a=t.ext,o=this.buildOneMobileBaseUrl(e);if(n&&i){var s=this.formatOneMobileDynamicParams(a,r);o+=O({dcn:n,pos:i,dynamicParams:s})}return o},buildOneMobileBaseUrl:function(e){return this.applyProtocol(y({host:e.params.host||"c2shb.ssp.yahoo.com"}))},applyProtocol:function(e){return/^https?:\/\//i.test(e)?e:0===e.indexOf("//")?"".concat("https",":").concat(e):"".concat("https","://").concat(e)},formatMarketplaceDynamicParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={};e.bidFloor&&(t.bidfloor=e.bidFloor),o(t,this.formatKeyValues(e.keyValues)),o(t,this.formatConsentData(r));var i="";return n._each(t,(function(e,r){i+="".concat(r,"=").concat(encodeURIComponent(e),";")})),i},formatOneMobileDynamicParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isSecureProtocol()&&(e.secure=T),o(e,this.formatConsentData(r));var t="";return n._each(e,(function(e,r){t+="&".concat(r,"=").concat(encodeURIComponent(e))})),t},buildOpenRtbRequestData:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={id:e.params.id,imp:e.params.imp};return this.isEUConsentRequired(r)&&(n.deepSetValue(t,"regs.ext.gdpr",T),r.gdpr.consentString&&n.deepSetValue(t,"user.ext.consent",r.gdpr.consentString)),r.uspConsent&&n.deepSetValue(t,"regs.ext.us_privacy",r.uspConsent),t},isEUConsentRequired:function(e){return!!(e&&e.gdpr&&e.gdpr.gdprApplies)},formatKeyValues:function(e){var r={};return n._each(e,(function(e,t){r["kv".concat(t)]=e})),r},formatConsentData:function(e){var r={};return this.isEUConsentRequired(e)&&(r.gdpr=T,e.gdpr.consentString&&(r.euconsent=e.gdpr.consentString)),e.uspConsent&&(r.us_privacy=e.uspConsent),r},parsePixelItems:function(e){var r=/\w*(?=\s)/,t=/src=("|')(.*?)\1/,n=[];if(e){var i=e.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);i&&i.forEach((function(e){var i=e.match(r)[0],a=e.match(t)[2];i&&i&&n.push({type:i===v.TAG?v.TYPE:h.TYPE,url:a})}))}return n},_parseBidResponse:function(e,r){var t,i;try{t=e.seatbid[0].bid[0]}catch(e){return}if(t.ext&&t.ext.encp)i=t.ext.encp;else if(null===(i=t.price)||isNaN(i))return void n.logError("Invalid price in bid response",p,t);return{bidderCode:r.bidderCode,requestId:r.bidId,ad:t.adm,cpm:i,width:t.w,height:t.h,creativeId:t.crid||0,pubapiId:e.id,currency:e.cur||"USD",dealId:t.dealid,netRevenue:!0,ttl:r.ttl}},isOneMobileBidder:E,isSecureProtocol:function(){return"https:"===document.location.protocol}};Object(i.registerBidder)(x)}}]);