(window.webpackJsonp=window.webpackJsonp||[]).push([[258],{337:function(e,n,r){"use strict";r.r(n),r.d(n,"spec",(function(){return d}));var t=r(0),o=r(55),i=r(13),c=r(57);var d={code:"videonow",supportedMediaTypes:[i.b],isBidRequestValid:function(e){return!!(e&&e.params&&e.params.pId)},buildRequests:function(e,n){t.logInfo("".concat("videonow",". buildRequests"));var r=[];return e.forEach((function(e){var t=function(e,n){var r=n.refererInfo,t=e.ext,o=e.bidId,i=e.params,c=e.code,d=e.sizes,a=i||{},u=a.pId,f=a.bidFloor,l=a.cur,s=a.placementId,p=a.url||"https://bidder.videonow.ru/prebid",v={method:"POST",url:p="".concat(p).concat(~p.indexOf("?")?"&":"?","profile_id=").concat(u),data:{id:o,cpm:f,code:c,sizes:d,cur:l||"RUB",placementId:s,ref:r&&r.referer}};return t&&Object.keys(t).forEach((function(e){v.data["ext_".concat(e)]=t[e]})),v}(e,n);t&&r.push(t)})),r},interpretResponse:function(e,n){if(!e||!e.body)return[];var r=(n&&n.data||{}).id;if(!r)return[];var o=e.body,i=o.seatbid,d=o.cur,a=o.ext;if(!i||!i.length)return[];var u=(a||{}).placementId;if(!u)return[];var f=[];return i.forEach((function(e){var n=e.bid;n&&n.length&&n.forEach((function(e){var n=function(e,n,r,o){var i=e.id,d=e.nurl,a=e.code,u=e.price,f=e.crid,l=e.ext,s=e.ttl,p=e.netRevenue,v=e.w,h=e.h,m=e.adm;if(!i||!u||!m)return null;var w=l||{},b=w.init,g=w.module,I=w.format;if(!b)return t.logError("vnInitModulePath is not defined"),null;var E=g||{},y=E.log,x=E.min;if(!x&&!y)return t.logError("module's paths are not defined"),null;return{requestId:n,cpm:u,width:v,height:h,creativeId:f,currency:r||"RUB",netRevenue:void 0===p||p,ttl:s||300,ad:a,nurl:d,renderer:{url:x||y,render:function(){var e=window.document;if(o&&e.getElementById(o)){var n={module:g,dataXml:m};I&&(n.format=I),((window.videonow=window.videonow||{}).init=window.videonow.init||{})[1]=n,Object(c.a)("".concat(b).concat(~b.indexOf("?")?"&":"?","profileId=").concat(1),"outstream")}else t.logError("bidAdapter ".concat("videonow",": ").concat(o," not found"))}}}}(e,r,d,u);n&&f.push(n)}))})),f},getUserSyncs:function(e,n){var r=[];return n&&n.length?(n.forEach((function(n){var t=(n&&n.body||{}).ext||{},o=t.pixels,i=t.iframes;e.iframeEnabled&&i&&i.length&&i.forEach((function(e){return r.push({type:"iframe",url:e})})),e.pixelEnabled&&o&&o.length&&o.forEach((function(e){return r.push({type:"image",url:e})}))})),t.logInfo("".concat("videonow"," getUserSyncs() syncs=").concat(r.length)),r):r},onBidWon:function(e){var n=(e||{}).nurl;n&&t.triggerPixel(t.replaceAuctionPrice(n,e.cpm))}};Object(o.registerBidder)(d)}}]);