(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{245:function(e,r,n){"use strict";n.r(r),n.d(r,"spec",(function(){return l}));var d=n(16),t=n(22),a=n(0),i=n(55),s=n(13);function o(){return(o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&(e[d]=n[d])}return e}).apply(this,arguments)}var p=1,u=2,l={code:"open8",supportedMediaTypes:[s.d,s.b],isBidRequestValid:function(e){return!!e.params.slotKey},buildRequests:function(e,r){for(var n=[],d=0;d<e.length;d++){var t=e[d],i="",s=a.getBidIdParameter("slotKey",t.params);i=a.tryAppendQueryString(i,"slot_key",s),i=a.tryAppendQueryString(i,"imp_id",c()),i+="bid_id="+t.bidId,n.push({method:"GET",url:"https://as.vt.open8.com/v1/control/prebid",data:i})}return n},interpretResponse:function(e,r){var n=e.body;if(!n.isAdReturn)return[];var d=n.ad,t={slotKey:n.slotKey,userId:n.userId,impId:n.impId,media:n.media,ds:d.ds,spd:d.spd,fa:d.fa,pr:d.pr,mr:d.mr,nurl:d.nurl,requestId:d.bidId,cpm:d.price,creativeId:d.creativeId,dealId:d.dealId,currency:d.currency||"JPY",netRevenue:!0,ttl:360};if(d.adType===p){var i=n.ad.video;o(t,{vastXml:i.vastXml,width:i.w,height:i.h,renderer:f(n),adResponse:n,mediaType:s.d})}else if(d.adType===u){var l=n.ad.banner;if(o(t,{width:l.w,height:l.h,ad:l.adm,mediaType:s.b}),l.imps)try{l.imps.forEach((function(e){var r=a.createTrackPixelHtml(e);t.ad+=r}))}catch(e){a.logError("Error appending imp tracking pixel",e)}}return[t]},getUserSyncs:function(e,r){var n=[];if(e.iframeEnabled&&r.length){var d=r[0].body.syncIFs;d&&d.forEach((function(e){n.push({type:"iframe",url:e})}))}if(e.pixelEnabled&&r.length){var t=r[0].body.syncPixels;t&&t.forEach((function(e){n.push({type:"image",url:e})}))}return n},onBidWon:function(e){if(e.nurl){var r=e.nurl.replace(/\$\{AUCTION_PRICE\}/,e.cpm);Object(t.a)(r,null)}}};function c(){for(var e="abcdefghijklmnopqrstuvwsyz0123456789",r=e.length,n="",d=0;d<16;d++)n+=e[Math.floor(Math.random()*r)];return n}function f(e){var r=d.a.install({id:e.ad.bidId,url:e.ad.video.purl,loaded:!1});try{r.setRender(m)}catch(e){a.logWarn("Prebid Error calling setRender on newRenderer",e)}return r}function m(e){e.renderer.push((function(){window.op8.renderPrebid({vastXml:e.vastXml,adUnitCode:e.adUnitCode,slotKey:e.slotKey,impId:e.impId,userId:e.userId,media:e.media,ds:e.ds,spd:e.spd,fa:e.fa,pr:e.pr,mr:e.mr,adResponse:e.adResponse,mediaType:e.mediaType})}))}Object(i.registerBidder)(l)}}]);