(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{286:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(285),i=r.n(n),a=r(279),o={},d=["criteo","outstream","adagio","browsi"];function s(e,t,r){if(t&&e){if(i()(d,t))return o[e]?(r&&"function"==typeof r&&(o[e].loaded?r():o[e].callbacks.push(r)),o[e].tag):(o[e]={loaded:!1,tag:null,callbacks:[]},r&&"function"==typeof r&&o[e].callbacks.push(r),a.logWarn("module ".concat(t," is loading external JavaScript")),function(t,r){var n=document.createElement("script");n.type="text/javascript",n.async=!0,o[e].tag=n,n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,r())}:n.onload=function(){r()};return n.src=t,a.insertElement(n),n}(e,(function(){o[e].loaded=!0;try{for(var t=0;t<o[e].callbacks.length;t++)o[e].callbacks[t]()}catch(e){a.logError("Error executing callback","adloader.js:loadExternalScript",e)}})));a.logError("".concat(t," not whitelisted for loading external JavaScript"))}else a.logError("cannot load external script without url and moduleCode")}},289:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return c}));var n=r(286),i=r(279),a=r(288),o=r.n(a);function d(e){var t=this,r=e.url,a=e.config,d=e.id,s=e.callback,c=e.loaded,u=e.adUnitCode;this.url=r,this.config=a,this.handlers={},this.id=d,this.loaded=c,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):i.logError("Commands given to Renderer.push must be wrapped in a function")},this.callback=s||function(){t.loaded=!0,t.process()},!function(e){var t=pbjs.adUnits,r=o()(t,(function(t){return t.code===e}));return!!(r&&r.renderer&&r.renderer.url&&r.renderer.render)}(u)?Object(n.a)(r,"outstream",this.callback):i.logWarn("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(u))}function s(e){return!(!e||!e.url)}function c(e,t){e.render(t)}d.install=function(e){return new d({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode})},d.prototype.getConfig=function(){return this.config},d.prototype.setRender=function(e){this.render=e},d.prototype.setEventHandlers=function(e){this.handlers=e},d.prototype.handleVideoEvent=function(e){var t=e.id,r=e.eventName;"function"==typeof this.handlers[r]&&this.handlers[r](),i.logMessage("Prebid Renderer event for id ".concat(t," type ").concat(r))},d.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){i.logError("Error processing Renderer command: ",e)}}},99:function(e,t,r){"use strict";r.r(t),r.d(t,"emxAdapter",(function(){return p})),r.d(t,"spec",(function(){return g}));var n=r(279),i=r(280),a=r(281),o=r(289),d=r(285),s=r.n(d),c=r(290);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var l="https://js.brealtime.com/outstream/1.30.0/bundle.js",p={validateSizes:function(e){return n.isArray(e)&&void 0!==e[0]?e.every((function(e){return n.isArray(e)&&2===e.length})):(n.logWarn("emx_digital: Sizes should be an array"),!1)},checkVideoContext:function(e){return e&&e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context&&("instream"===e.mediaTypes.video.context||"outstream"===e.mediaTypes.video.context)},buildBanner:function(e){var t=[];return t=e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes?e.mediaTypes.banner.sizes:e.sizes,p.validateSizes(t)||(n.logWarn("emx_digital: could not detect mediaType banner sizes. Assigning to bid sizes instead"),t=e.sizes),{format:t.map((function(e){return{w:e[0],h:e[1]}})),w:t[0][0],h:t[0][1]}},formatVideoResponse:function(e,t,r){return e.vastXml=t.adm,r.bidRequest&&r.bidRequest.mediaTypes&&r.bidRequest.mediaTypes.video&&"outstream"===r.bidRequest.mediaTypes.video.context&&(e.renderer=p.createRenderer(e,{id:t.id,url:l})),e},isMobile:function(){return/(ios|ipod|ipad|iphone|android)/i.test(navigator.userAgent)},isConnectedTV:function(){return/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(navigator.userAgent)},getDevice:function(){return{ua:navigator.userAgent,js:1,dnt:"yes"===navigator.doNotTrack||"1"===navigator.doNotTrack||"1"===navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,devicetype:p.isMobile()?1:p.isConnectedTV()?3:2,language:navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage}},cleanProtocols:function(e){return e.protocols&&s()(e.protocols,7)&&(n.logWarn("emx_digital: VAST 4.0 is currently not supported. This protocol has been filtered out of the request."),e.protocols=e.protocols.filter((function(e){return 7!==e}))),e},outstreamRender:function(e){e.renderer.push((function(){var t=e&&e.params&&e.params[0]&&e.params[0].video?e.params[0].video:{};window.emxVideoQueue=window.emxVideoQueue||[],window.queueEmxVideo({id:e.adUnitCode,adsResponses:e.vastXml,options:t}),window.emxVideoReady&&window.videojs&&window.emxVideoReady()}))},createRenderer:function(e,t){var r=o.a.install({id:t.id,url:l,loaded:!1});try{r.setRender(p.outstreamRender)}catch(e){n.logWarn("Prebid Error calling setRender on renderer",e)}return r},buildVideo:function(e){var t=u(e.mediaTypes.video,e.params.video);return n.isArray(e.mediaTypes.video.playerSize[0])?(t.w=e.mediaTypes.video.playerSize[0][0],t.h=e.mediaTypes.video.playerSize[0][1]):(t.w=e.mediaTypes.video.playerSize[0],t.h=e.mediaTypes.video.playerSize[1]),p.cleanProtocols(t)},parseResponse:function(e){try{return decodeURIComponent(e.replace(/%(?![0-9][0-9a-fA-F]+)/g,"%25"))}catch(e){n.logError("emx_digitalBidAdapter","error",e)}},getReferrer:function(){try{return window.top.document.referrer}catch(e){return document.referrer}},getSite:function(e){return{domain:Object(c.c)(e.referer).hostname,page:e.referer,ref:p.getReferrer()}},getGdpr:function(e,t){return e.gdprConsent&&(t.regs={ext:{gdpr:!0===e.gdprConsent.gdprApplies?1:0}}),e.gdprConsent&&e.gdprConsent.gdprApplies&&(t.user={ext:{consent:e.gdprConsent.consentString}}),t}},g={code:"emx_digital",supportedMediaTypes:[a.b,a.d],isBidRequestValid:function(e){if(!e||!e.params)return n.logWarn("emx_digital: Missing bid or bid params."),!1;if("emx_digital"!==e.bidder)return n.logWarn('emx_digital: Must use "emx_digital" as bidder code.'),!1;if(!e.params.tagid||!n.isStr(e.params.tagid))return n.logWarn("emx_digital: Missing tagid param or tagid present and not type String."),!1;var t;if(e.mediaTypes&&e.mediaTypes.banner){if(t=e.mediaTypes.banner.sizes?e.mediaTypes.banner.sizes:e.sizes,!p.validateSizes(t))return n.logWarn("emx_digital: Missing sizes in bid"),!1}else if(e.mediaTypes&&e.mediaTypes.video){if(!p.checkVideoContext(e))return n.logWarn("emx_digital: Missing video context: instream or outstream"),!1;if(!e.mediaTypes.video.playerSize)return n.logWarn("emx_digital: Missing video playerSize"),!1}return!0},buildRequests:function(e,t){var r=[],i="https://hb.emxdgt.com?t="+(t.timeout||"")+"&ts="+Date.now()+"&src=pbjs",a=location.protocol.indexOf("https")>-1?1:0,o=p.getDevice(),d=p.getSite(t.refererInfo);n._each(e,(function(e){var t=n.getBidIdParameter("tagid",e.params),i=parseFloat(n.getBidIdParameter("bidfloor",e.params))||0,o=!!e.mediaTypes.video,d=u({id:e.bidId,tid:e.transactionId,tagid:t,secure:a},o?{video:p.buildVideo(e)}:{banner:p.buildBanner(e)},i>0?{bidfloor:i,bidfloorcur:"USD"}:{});r.push(d)}));var s={id:t.auctionId,imp:r,device:o,site:d,cur:"USD",version:"1.5.0"};return s=p.getGdpr(t,u({},s)),t&&t.uspConsent&&(s.us_privacy=t.uspConsent),{method:"POST",url:i,data:JSON.stringify(s),options:{withCredentials:!0},bidderRequest:t}},interpretResponse:function(e,t){var r=[],n=e.body||{};return n.seatbid&&n.seatbid.length>0&&n.seatbid[0].bid&&n.seatbid.forEach((function(e){e=e.bid[0];var n=!1,i=p.parseResponse(e.adm)||"",o={requestId:e.id,cpm:e.price,width:e.w,height:e.h,creativeId:e.crid||e.id,dealId:e.dealid||null,currency:"USD",netRevenue:!0,ttl:e.ttl,ad:i};e.adm&&e.adm.indexOf("<?xml version=")>-1&&(n=!0,o=p.formatVideoResponse(o,u({},e),t)),o.mediaType=n?a.d:a.b,r.push(o)})),r},getUserSyncs:function(e){var t=[];return e.iframeEnabled&&t.push({type:"iframe",url:"https://biddr.brealtime.com/check.html"}),t}};Object(i.registerBidder)(g)}}]);