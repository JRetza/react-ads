(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{167:function(e,r,n){"use strict";n.r(r),n.d(r,"spec",(function(){return u}));var t=n(287),a=n(281),d=n(277),o=n(278),i=n(279);function c(){return(c=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}var l=1,s=2,u={code:"open8",supportedMediaTypes:[i.d,i.b],isBidRequestValid:function(e){return!!e.params.slotKey},buildRequests:function(e,r){for(var n=[],t=0;t<e.length;t++){var a=e[t],o="",i=d.getBidIdParameter("slotKey",a.params);o=d.tryAppendQueryString(o,"slot_key",i),o=d.tryAppendQueryString(o,"imp_id",p()),o+="bid_id="+a.bidId,n.push({method:"GET",url:"https://as.vt.open8.com/v1/control/prebid",data:o})}return n},interpretResponse:function(e,r){var n=e.body;if(!n.isAdReturn)return[];var t=n.ad,a={slotKey:n.slotKey,userId:n.userId,impId:n.impId,media:n.media,ds:t.ds,spd:t.spd,fa:t.fa,pr:t.pr,mr:t.mr,nurl:t.nurl,requestId:t.bidId,cpm:t.price,creativeId:t.creativeId,dealId:t.dealId,currency:t.currency||"JPY",netRevenue:!0,ttl:360};if(t.adType===l){var o=n.ad.video;c(a,{vastXml:o.vastXml,width:o.w,height:o.h,renderer:f(n),adResponse:n,mediaType:i.d})}else if(t.adType===s){var u=n.ad.banner;if(c(a,{width:u.w,height:u.h,ad:u.adm,mediaType:i.b}),u.imps)try{u.imps.forEach((function(e){var r=d.createTrackPixelHtml(e);a.ad+=r}))}catch(e){d.logError("Error appending imp tracking pixel",e)}}return[a]},getUserSyncs:function(e,r){var n=[];if(e.iframeEnabled&&r.length){var t=r[0].body.syncIFs;t&&t.forEach((function(e){n.push({type:"iframe",url:e})}))}if(e.pixelEnabled&&r.length){var a=r[0].body.syncPixels;a&&a.forEach((function(e){n.push({type:"image",url:e})}))}return n},onBidWon:function(e){if(e.nurl){var r=e.nurl.replace(/\$\{AUCTION_PRICE\}/,e.cpm);Object(a.a)(r,null)}}};function p(){for(var e="abcdefghijklmnopqrstuvwsyz0123456789",r=e.length,n="",t=0;t<16;t++)n+=e[Math.floor(Math.random()*r)];return n}function f(e){var r=t.a.install({id:e.ad.bidId,url:e.ad.video.purl,loaded:!1});try{r.setRender(h)}catch(e){d.logWarn("Prebid Error calling setRender on newRenderer",e)}return r}function h(e){e.renderer.push((function(){window.op8.renderPrebid({vastXml:e.vastXml,adUnitCode:e.adUnitCode,slotKey:e.slotKey,impId:e.impId,userId:e.userId,media:e.media,ds:e.ds,spd:e.spd,fa:e.fa,pr:e.pr,mr:e.mr,adResponse:e.adResponse,mediaType:e.mediaType})}))}Object(o.registerBidder)(u)},284:function(e,r,n){"use strict";n.d(r,"a",(function(){return c}));var t=n(283),a=n.n(t),d=n(277),o={},i=["criteo","outstream","adagio","browsi"];function c(e,r,n){if(r&&e){if(a()(i,r))return o[e]?(n&&"function"==typeof n&&(o[e].loaded?n():o[e].callbacks.push(n)),o[e].tag):(o[e]={loaded:!1,tag:null,callbacks:[]},n&&"function"==typeof n&&o[e].callbacks.push(n),d.logWarn("module ".concat(r," is loading external JavaScript")),function(r,n){var t=document.createElement("script");t.type="text/javascript",t.async=!0,o[e].tag=t,t.readyState?t.onreadystatechange=function(){"loaded"!==t.readyState&&"complete"!==t.readyState||(t.onreadystatechange=null,n())}:t.onload=function(){n()};return t.src=r,d.insertElement(t),t}(e,(function(){o[e].loaded=!0;try{for(var r=0;r<o[e].callbacks.length;r++)o[e].callbacks[r]()}catch(e){d.logError("Error executing callback","adloader.js:loadExternalScript",e)}})));d.logError("".concat(r," not whitelisted for loading external JavaScript"))}else d.logError("cannot load external script without url and moduleCode")}},287:function(e,r,n){"use strict";n.d(r,"a",(function(){return i})),n.d(r,"c",(function(){return c})),n.d(r,"b",(function(){return l}));var t=n(284),a=n(277),d=n(286),o=n.n(d);function i(e){var r=this,n=e.url,d=e.config,i=e.id,c=e.callback,l=e.loaded,s=e.adUnitCode;this.url=n,this.config=d,this.handlers={},this.id=i,this.loaded=l,this.cmd=[],this.push=function(e){"function"==typeof e?r.loaded?e.call():r.cmd.push(e):a.logError("Commands given to Renderer.push must be wrapped in a function")},this.callback=c||function(){r.loaded=!0,r.process()},!function(e){var r=pbjs.adUnits,n=o()(r,(function(r){return r.code===e}));return!!(n&&n.renderer&&n.renderer.url&&n.renderer.render)}(s)?Object(t.a)(n,"outstream",this.callback):a.logWarn("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(s))}function c(e){return!(!e||!e.url)}function l(e,r){e.render(r)}i.install=function(e){return new i({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode})},i.prototype.getConfig=function(){return this.config},i.prototype.setRender=function(e){this.render=e},i.prototype.setEventHandlers=function(e){this.handlers=e},i.prototype.handleVideoEvent=function(e){var r=e.id,n=e.eventName;"function"==typeof this.handlers[n]&&this.handlers[n](),a.logMessage("Prebid Renderer event for id ".concat(r," type ").concat(n))},i.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){a.logError("Error processing Renderer command: ",e)}}}}]);