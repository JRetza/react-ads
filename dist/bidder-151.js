(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{94:function(e,t,r){"use strict";r.r(t),r.d(t,"spec",(function(){return f})),r.d(t,"cleanSizes",(function(){return p})),r.d(t,"shuffle",(function(){return l})),r.d(t,"removeDuplicate",(function(){return m})),r.d(t,"upto5",(function(){return b})),r.d(t,"matchRequest",(function(){return h})),r.d(t,"checkDeepArray",(function(){return g})),r.d(t,"defaultSize",(function(){return y}));var n=r(279),i=r(280),u=r(282);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,u=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){i=!0,u=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw u}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d="https://dmx.districtm.io/b/v1",f={code:"districtmDMX",supportedFormat:["banner"],isBidRequestValid:function(e){return!(!e.params.dmxid||!e.params.memberid)},interpretResponse:function(e,t){return(e=e.body||{}).seatbid&&n.isArray(e.seatbid)?e.seatbid.reduce((function(e,r){var n=r.bid.reduce((function(e,r){if(e.price<r.price){var n=y(h(r.impid,t)),i=n.width,u=n.height;return r.cpm=parseFloat(r.price).toFixed(2),r.bidId=r.impid,r.requestId=r.impid,r.width=r.w||i,r.height=r.h||u,r.dealid&&(r.dealId=r.dealid),r.ad=r.adm,r.netRevenue=!0,r.creativeId=r.crid,r.currency="USD",r.ttl=60,r}return e.cpm=e.price,e}),{price:0});return n.adm&&e.push(n),e}),[]).filter((function(e){return!!e.bidId})):[]},buildRequests:function(e,t){var r=u.b.getConfig("bidderTimeout"),i=null,c={id:n.generateUUID(),cur:["USD"],tmax:r-300,test:this.test()||0,site:{publisher:{id:String(e[0].params.memberid)||null}}};try{var o=u.b.getConfig("dmx");c.user=o.user||{};var f=o.site||{};c.site=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},c.site,{},f)}catch(e){}c.test||delete c.test,t.gdprConsent&&(c.regs={},c.regs.ext={},c.regs.ext.gdpr=!0===t.gdprConsent.gdprApplies?1:0,c.user={},c.user.ext={},c.user.ext.consent=t.gdprConsent.consentString),t&&t.uspConsent&&(c.regs=c.regs||{},c.regs.ext=c.regs.ext||{},c.regs.ext.us_privacy=t.uspConsent);try{i=e[0].schain,c.source={},c.source.ext={},c.source.ext.schain=i||{}}catch(e){}var l=e.map((function(e){var t={};return t.id=e.bidId,t.tagid=String(e.params.dmxid),t.secure=1,t.banner={topframe:1,w:p(e.sizes,"w"),h:p(e.sizes,"h"),format:p(e.sizes).map((function(e){return{w:e[0],h:e[1]}})).filter((function(e){return"number"==typeof e.w&&"number"==typeof e.h}))},t}));return l.length<=5?(c.imp=l,{method:"POST",url:d,data:JSON.stringify(c),bidderRequest:t}):b(l,c,t,d)},test:function(){return-1!==window.location.href.indexOf("dmTest=true")?1:0},getUserSyncs:function(e,t,r,n){var i=[],u="https://cdn.districtm.io/ids/index.html";if(r&&r.gdprApplies&&"string"==typeof r.consentString&&i.push(["gdpr",r.consentString]),n&&i.push(["ccpa",n]),i.length>0&&(u+="?"+i.map((function(e){return e.join("=")})).join("&")),e.iframeEnabled)return[{type:"iframe",url:u}]}};function p(e,t){var r=l(e,[{size:[300,250],s:100},{size:[728,90],s:95},{size:[320,50],s:90},{size:[160,600],s:88},{size:[300,600],s:85},{size:[300,50],s:80},{size:[970,250],s:75},{size:[970,90],s:60}]);switch(t){case"w":return r[0][0]||0;case"h":return r[0][1]||0;case"size":default:return r}}function l(e,t){var r=e.filter((function(e){return-1===t.map((function(e){return"".concat(e.size[0],"x").concat(e.size[1])})).indexOf("".concat(e[0],"x").concat(e[1]))})),n=e.reduce((function(e,r){return 0===e.length?(e.push(r),e):(e.push(r),(e=(e=t.filter((function(t){return-1!==e.map((function(e){return"".concat(e[0],"x").concat(e[1])})).indexOf("".concat(t.size[0],"x").concat(t.size[1]))}))).sort((function(e,t){return t.s-e.s}))).map((function(e){return e.size})))}),[]);return m([].concat(o(n),o(r)))}function m(e){return e.filter((function(t,r){return e.map((function(e){return"".concat(e[0],"x").concat(e[1])})).indexOf("".concat(t[0],"x").concat(t[1]))===r}))}function b(e,t,r,n){for(var i=[];0!==e.length;)e.length>=5?i.push(e.splice(0,5)):i.push(e.splice(0,e.length));return i.map((function(e){return t.imp=e,{method:"POST",url:n,data:JSON.stringify(t),bidderRequest:r}}))}function h(e,t){return c(t.bidderRequest.bids.filter((function(t){return t.bidId===e})),1)[0]}function g(e){return Array.isArray(e)&&Array.isArray(e[0])?e[0]:e}function y(e){var t=e.sizes,r={};return r.width=g(t)[0],r.height=g(t)[1],r}Object(i.registerBidder)(f)}}]);