(window.webpackJsonp=window.webpackJsonp||[]).push([[245],{229:function(e,r,t){"use strict";t.r(r),t.d(r,"spec",(function(){return l}));var a=t(279),n=t(280),i=t(282),s=t(290),o=t(281);function d(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],a=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(t.push(s.value),!r||t.length!==r);a=!0);}catch(e){n=!0,i=e}finally{try{a||null==o.return||o.return()}finally{if(n)throw i}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e,r){return e.required&&(r.required=1),r}function p(e){return e.w||e.h?{url:e.url,width:e.w,height:e.h}:e.url}function u(e,r,t){a._each(e,(function(e){e.body&&e.body.ext&&e.body.ext.sync_dsps&&e.body.ext.sync_dsps.length&&a._each(e.body.ext.sync_dsps,(function(e){e[0]===r&&e[1]&&t.push({type:r,url:e[1]})}))}))}var l={code:"sortable",supportedMediaTypes:[o.b,o.c,o.d],isBidRequestValid:function(e){var r=i.b.getConfig("sortable"),t=r&&!!r.siteId||e.params.siteId,n=!e.params.floor||a.isNumber(e.params.floor),s=/\d+x\d+/,d=!e.params.floorSizeMap||a.isPlainObject(e.params.floorSizeMap)&&Object.keys(e.params.floorSizeMap).every((function(r){return r.match(s)&&a.isNumber(e.params.floorSizeMap[r])})),c=!e.params.keywords||a.isPlainObject(e.params.keywords)&&Object.keys(e.params.keywords).every((function(r){return a.isStr(r)&&a.isStr(e.params.keywords[r])})),p=!e.mediaTypes||e.mediaTypes[o.b]||!(e.mediaTypes[o.c]||e.mediaTypes[o.d]),u=p?a.deepAccess(e,"mediaType.".concat(o.b,".sizes"))||e.sizes:null;return!!(e.params.tagId&&t&&n&&d&&c&&(!p||u&&u.length>0&&u.every((function(e){return 2==e.length&&e.every((function(e){return a.isNumber(e)}))}))))},buildRequests:function(e,r){var t=(i.b.getConfig("sortable")||{}).siteId,n=Object(s.c)(r.refererInfo.referer),p=a._map(e,(function(e){var r={id:e.bidId,tagid:e.params.tagId,ext:{}},t=a.deepAccess(e,"mediaTypes.".concat(o.b)),n=a.deepAccess(e,"mediaTypes.".concat(o.c)),i=a.deepAccess(e,"mediaTypes.".concat(o.d));if(t||!n&&!i){var s=t&&t.sizes||e.sizes;r.banner={format:a._map(s,(function(e){var r=d(e,2);return{w:r[0],h:r[1]}}))}}if(n&&(r.native=function(e){var r=[],t=e.title;t&&r.push(c(t,{title:{len:t.len}}));var n=e.image;n&&r.push(c(n,{img:{type:3,wmin:1,hmin:1}}));var i=e.icon;i&&r.push(c(i,{img:{type:1,wmin:1,hmin:1}}));var s=e.body;s&&r.push(c(s,{data:{type:2}}));var o=e.cta;o&&r.push(c(o,{data:{type:12}}));var d=e.sponsoredBy;return d&&r.push(c(d,{data:{type:1}})),a._each(r,(function(e,r){return e.id=r})),{ver:"1",request:JSON.stringify({ver:"1",assets:r})}}(n)),i&&"instream"===i.context){var p={placement:1};p.mimes=i.mimes||[],p.minduration=a.deepAccess(e,"params.video.minduration")||10,p.maxduration=a.deepAccess(e,"params.video.maxduration")||60;var u=a.deepAccess(e,"params.video.startdelay");if(null!=u&&(p.startdelay=u),i.playerSize&&i.playerSize.length){var l=i.playerSize[0];p.w=l[0],p.h=l[1]}i.api&&(p.api=i.api),i.protocols&&(p.protocols=i.protocols),i.playbackmethod&&(p.playbackmethod=i.playbackmethod),r.video=p}return e.params.floor&&(r.bidfloor=e.params.floor),e.params.keywords&&(r.ext.keywords=e.params.keywords),e.params.bidderParams&&a._each(e.params.bidderParams,(function(e,t){r.ext[t]=e})),e.params.floorSizeMap&&(r.ext.floorSizeMap=e.params.floorSizeMap),r})),u=r&&r.gdprConsent,l={id:a.getUniqueIdentifierStr(),imp:p,source:{ext:{schain:e[0].schain}},regs:{ext:{}},site:{domain:n.hostname,page:n.href,ref:n.href,publisher:{id:t||e[0].params.siteId},device:{w:screen.width,h:screen.height}}};return r&&r.timeout>0&&(l.tmax=r.timeout),u&&(l.user={ext:{consent:u.consentString}},"boolean"==typeof u.gdprApplies&&(l.regs.ext.gdpr=u.gdprApplies?1:0)),r.uspConsent&&(l.regs.ext.us_privacy=r.uspConsent),{method:"POST",url:"".concat("https://c.deployads.com","/openrtb2/auction?src=prebid_prebid_3.11.0&host=").concat(n.hostname),data:JSON.stringify(l),options:{contentType:"text/plain"}}},interpretResponse:function(e){var r=e.body,t=r.id,n=r.seatbid,i=[];return t&&n&&a._each(n,(function(e){a._each(e.bid,(function(e){var r={requestId:e.impid,cpm:parseFloat(e.price),width:parseInt(e.w),height:parseInt(e.h),creativeId:e.crid||e.id,dealId:e.dealid||null,currency:"USD",netRevenue:!0,mediaType:o.b,ttl:60};if(e.adm){var t=a.deepAccess(e,"ext.ad_format");if("native"===t){var n=function(e){var r=null;try{r=JSON.parse(e)}catch(e){a.logError("Sortable bid adapter unable to parse native bid response:\n\n"+e)}return r&&r.native}(e.adm);if(!n)return;r.mediaType=o.c,r.native=function(e){var r={};return e.link&&(r.clickUrl=e.link.url),a._each(e.assets,(function(e){switch(e.id){case 1:r.title=e.title.text;break;case 2:r.image=p(e.img);break;case 3:r.icon=p(e.img);break;case 4:r.body=e.data.value;break;case 5:r.cta=e.data.value;break;case 6:r.sponsoredBy=e.data.value}})),r}(n)}else"instream"===t?(r.mediaType=o.d,r.vastXml=e.adm):(r.mediaType=o.b,r.ad=e.adm,e.nurl&&(r.ad+=a.createTrackPixelHtml(decodeURIComponent(e.nurl))))}else e.nurl&&(r.adUrl=e.nurl);e.ext&&(r.sortable=e.ext),i.push(r)}))})),i},getUserSyncs:function(e,r){var t=[];return e.iframeEnabled&&u(r,"iframe",t),e.pixelEnabled&&u(r,"image",t),t},onTimeout:function(e){fetch("".concat("https://c.deployads.com","/prebid/timeout"),{method:"POST",body:JSON.stringify(e),mode:"no-cors",headers:new Headers({"Content-Type":"text/plain"})})}};Object(n.registerBidder)(l)}}]);