(window.webpackJsonp=window.webpackJsonp||[]).push([[210],{281:function(e,r,i){"use strict";i.r(r),i.d(r,"OPENRTB",(function(){return o})),i.d(r,"spec",(function(){return c}));var t=i(0),n=i(13),a=i(55),s=i(3),d=i.n(s),p=["prebid-eu","prebid-us","prebid-asia"],u=["USD"],o={NATIVE:{IMAGE_TYPE:{ICON:1,MAIN:3},ASSET_ID:{TITLE:1,IMAGE:2,ICON:3,BODY:4,SPONSORED:5,CTA:6},DATA_ASSET_TYPE:{SPONSORED:1,DESC:2,CTA_TEXT:12}}},c={code:"rtbhouse",supportedMediaTypes:[n.b,n.c],isBidRequestValid:function(e){return!(!d()(p,e.params.region)||!e.params.publisherId)},buildRequests:function(e,r){var i={id:e[0].auctionId,imp:e.map((function(e){return function(e){var r={id:e.bidId,banner:T(e),native:E(e),tagid:e.adUnitCode.toString()},i=parseFloat(e.params.bidfloor);i&&(r.bidfloor=i);return r}(e)})),site:A(e,r),cur:u,test:e[0].params.test||0,source:{tid:e[0].transactionId}};if(r&&r.gdprConsent&&r.gdprConsent.gdprApplies){var t=r.gdprConsent.consentString?r.gdprConsent.consentString.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):"",n=r.gdprConsent.gdprApplies?1:0;i.regs={ext:{gdpr:n}},i.user={ext:{consent:t}}}return{method:"POST",url:"https://"+e[0].params.region+".creativecdn.com/bidder/prebid/bids",data:JSON.stringify(i)}},interpretResponse:function(e,r){var i=e.body;if(!t.isArray(i))return[];var a=[];return i.forEach((function(e){0!==e.price&&(0===e.adm.indexOf("{")?a.push(function(e){return{requestId:e.impid,mediaType:n.c,cpm:e.price,creativeId:e.adid,width:1,height:1,ttl:55,netRevenue:!0,currency:"USD",native:m(e.adm)}}(e)):a.push(function(e){return{requestId:e.impid,mediaType:n.b,cpm:e.price,creativeId:e.adid,ad:e.adm,width:e.w,height:e.h,ttl:55,netRevenue:!0,currency:"USD"}}(e)))})),a}};function T(e){if("banner"===e.mediaType||t.deepAccess(e,"mediaTypes.banner")||!e.mediaType&&!e.mediaTypes){var r=e.sizes||e.mediaTypes.banner.sizes;return{w:r[0][0],h:r[0][1],format:r.map((function(e){return{w:e[0],h:e[1]}}))}}}function A(e,r){return{publisher:{id:(e&&e.length>0?e[0].params.publisherId:"unknown").toString()},page:r.refererInfo.referer,name:t.getOrigin()}}function E(e){if("native"===e.mediaType||t.deepAccess(e,"mediaTypes.native"))return{request:{assets:I(e)},ver:"1.1"}}function I(e){var r=e.nativeParams||t.deepAccess(e,"mediaTypes.native"),i=[];return r.title&&i.push({id:o.NATIVE.ASSET_ID.TITLE,required:r.title.required?1:0,title:{len:r.title.len||25}}),r.image&&i.push({id:o.NATIVE.ASSET_ID.IMAGE,required:r.image.required?1:0,img:S(r.image,o.NATIVE.IMAGE_TYPE.MAIN)}),r.icon&&i.push({id:o.NATIVE.ASSET_ID.ICON,required:r.icon.required?1:0,img:S(r.icon,o.NATIVE.IMAGE_TYPE.ICON)}),r.sponsoredBy&&i.push({id:o.NATIVE.ASSET_ID.SPONSORED,required:r.sponsoredBy.required?1:0,data:{type:o.NATIVE.DATA_ASSET_TYPE.SPONSORED,len:r.sponsoredBy.len}}),r.body&&i.push({id:o.NATIVE.ASSET_ID.BODY,required:r.body.request?1:0,data:{type:o.NATIVE.DATA_ASSET_TYPE.DESC,len:r.body.len}}),r.cta&&i.push({id:o.NATIVE.ASSET_ID.CTA,required:r.cta.required?1:0,data:{type:o.NATIVE.DATA_ASSET_TYPE.CTA_TEXT,len:r.cta.len}}),i}function S(e,r){var i={type:r};if(e.aspect_ratios){var t=e.aspect_ratios[0],n=t.min_width||100;i.wmin=n,i.hmin=n/t.ratio_width*t.ratio_height}if(e.sizes){var a=Array.isArray(e.sizes[0])?e.sizes[0]:e.sizes;i.w=a[0],i.h=a[1]}return i}function m(e){var r=JSON.parse(e).native,i={clickUrl:encodeURIComponent(r.link.url),impressionTrackers:r.imptrackers};return r.assets.forEach((function(e){switch(e.id){case o.NATIVE.ASSET_ID.TITLE:i.title=e.title.text;break;case o.NATIVE.ASSET_ID.IMAGE:i.image={url:encodeURIComponent(e.img.url),width:e.img.w,height:e.img.h};break;case o.NATIVE.ASSET_ID.ICON:i.icon={url:encodeURIComponent(e.img.url),width:e.img.w,height:e.img.h};break;case o.NATIVE.ASSET_ID.BODY:i.body=e.data.value;break;case o.NATIVE.ASSET_ID.SPONSORED:i.sponsoredBy=e.data.value;break;case o.NATIVE.ASSET_ID.CTA:i.cta=e.data.value}})),i}Object(a.registerBidder)(c)}}]);