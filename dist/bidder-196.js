(window.webpackJsonp=window.webpackJsonp||[]).push([[196],{262:function(e,a,r){"use strict";r.r(a),r.d(a,"spec",(function(){return N}));var i=r(0),t=r(55),s=r(13),n=r(2);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},p="number",c="string",u="boolean",l="array",m={mimes:l,minduration:p,maxduration:p,startdelay:p,playbackmethod:l,api:l,protocols:l,w:p,h:p,battr:l,linearity:p,placement:p,minbitrate:p,maxbitrate:p},g={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},BODY:{ID:5,KEY:"body",TYPE:2},CLICKURL:{ID:6,KEY:"clickUrl",TYPE:0},VIDEO:{ID:7,KEY:"video",TYPE:0},EXT:{ID:8,KEY:"ext",TYPE:0},DATA:{ID:9,KEY:"data",TYPE:0},LOGO:{ID:10,KEY:"logo",TYPE:0},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1},DESC:{ID:12,KEY:"data",TYPE:2},RATING:{ID:13,KEY:"rating",TYPE:3},LIKES:{ID:14,KEY:"likes",TYPE:4},DOWNLOADS:{ID:15,KEY:"downloads",TYPE:5},PRICE:{ID:16,KEY:"price",TYPE:6},SALEPRICE:{ID:17,KEY:"saleprice",TYPE:7},PHONE:{ID:18,KEY:"phone",TYPE:8},ADDRESS:{ID:19,KEY:"address",TYPE:9},DESC2:{ID:20,KEY:"desc2",TYPE:10},DISPLAYURL:{ID:21,KEY:"displayurl",TYPE:11},CTA:{ID:22,KEY:"cta",TYPE:12}},h=1,v=2,f=3,b=[{id:g.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:g.TITLE.ID,required:!0},{id:g.IMAGE.ID,required:!0}],y={1:"PMP",5:"PREF",6:"PMPG"},I=0,E=!1,w={},P={};function T(e,a){if(i.isStr(a))switch(e){case"pmzoneid":return a.split(",").slice(0,50).map((function(e){return e.trim()})).join();case"kadfloor":case"lat":case"lon":return parseFloat(a)||void 0;case"yob":return parseInt(a)||void 0;default:return a}else a&&i.logWarn("PubMatic: Ignoring param key: "+e+", expects string-value, found "+o(a))}function D(e){var a;e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(a=e.params.adSlot,i.isStr(a)?a.replace(/^\s+/g,"").replace(/\s+$/g,""):"");var r=e.params.adSlot,t=r.split(":");if(r=t[0],2==t.length&&(e.params.adUnitIndex=t[1]),t=r.split("@"),e.params.adUnit=t[0],t.length>1){if(2!=(t=t[1].split("x")).length)return void i.logWarn("PubMatic: AdSlot Error: adSlot not in required format");e.params.width=parseInt(t[0],10),e.params.height=parseInt(t[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(s.b)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var n=0,o=[];n<e.mediaTypes.banner.sizes.length;n++)2===e.mediaTypes.banner.sizes[n].length&&o.push(e.mediaTypes.banner.sizes[n]);e.mediaTypes.banner.sizes=o,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}function S(e,a,r){var t,s="Ignoring param key: "+e+", expects "+r+", found "+o(a);switch(r){case u:t=i.isBoolean;break;case p:t=i.isNumber;break;case c:t=i.isStr;break;case l:t=i.isArray}if(t(a))return a;i.logWarn("PubMatic: "+s)}function O(e,a){var r=e.KEY;return{id:e.ID,required:a[r].required?1:0,data:{type:e.TYPE,len:a[r].len,ext:a[r].ext}}}function Y(e){var a={assets:[]};for(var r in e){if(e.hasOwnProperty(r)){var t={};if(!(a.assets&&a.assets.length>0&&a.assets.hasOwnProperty(r)))switch(r){case g.TITLE.KEY:e[r].len||e[r].length?t={id:g.TITLE.ID,required:e[r].required?1:0,title:{len:e[r].len||e[r].length,ext:e[r].ext}}:i.logWarn("PubMatic: Error: Title Length is required for native ad: "+JSON.stringify(e));break;case g.IMAGE.KEY:e[r].sizes&&e[r].sizes.length>0?t={id:g.IMAGE.ID,required:e[r].required?1:0,img:{type:f,w:e[r].w||e[r].width||(e[r].sizes?e[r].sizes[0]:void 0),h:e[r].h||e[r].height||(e[r].sizes?e[r].sizes[1]:void 0),wmin:e[r].wmin||e[r].minimumWidth||(e[r].minsizes?e[r].minsizes[0]:void 0),hmin:e[r].hmin||e[r].minimumHeight||(e[r].minsizes?e[r].minsizes[1]:void 0),mimes:e[r].mimes,ext:e[r].ext}}:i.logWarn("PubMatic: Error: Image sizes is required for native ad: "+JSON.stringify(e));break;case g.ICON.KEY:e[r].sizes&&e[r].sizes.length>0?t={id:g.ICON.ID,required:e[r].required?1:0,img:{type:h,w:e[r].w||e[r].width||(e[r].sizes?e[r].sizes[0]:void 0),h:e[r].h||e[r].height||(e[r].sizes?e[r].sizes[1]:void 0)}}:i.logWarn("PubMatic: Error: Icon sizes is required for native ad: "+JSON.stringify(e));break;case g.VIDEO.KEY:t={id:g.VIDEO.ID,required:e[r].required?1:0,video:{minduration:e[r].minduration,maxduration:e[r].maxduration,protocols:e[r].protocols,mimes:e[r].mimes,ext:e[r].ext}};break;case g.EXT.KEY:t={id:g.EXT.ID,required:e[r].required?1:0};break;case g.LOGO.KEY:t={id:g.LOGO.ID,required:e[r].required?1:0,img:{type:v,w:e[r].w||e[r].width||(e[r].sizes?e[r].sizes[0]:void 0),h:e[r].h||e[r].height||(e[r].sizes?e[r].sizes[1]:void 0)}};break;case g.SPONSOREDBY.KEY:case g.BODY.KEY:case g.RATING.KEY:case g.LIKES.KEY:case g.DOWNLOADS.KEY:case g.PRICE.KEY:case g.SALEPRICE.KEY:case g.PHONE.KEY:case g.ADDRESS.KEY:case g.DESC2.KEY:case g.DISPLAYURL.KEY:case g.CTA.KEY:t=O(P[r],e)}}t&&t.id&&(a.assets[a.assets.length]=t)}var s=b.length,n=0;return b.forEach((function(e){for(var r=a.assets.length,i=0;i<r;i++)if(e.id==a.assets[i].id){n++;break}})),E=s!=n,a}function k(e){var a,r=e.mediaTypes.banner.sizes,t=[];if(void 0!==r&&i.isArray(r)){if(a={},e.params.width||e.params.height)a.w=e.params.width,a.h=e.params.height;else{if(0===r.length)return a=void 0,i.logWarn("PubMatic: Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),a;a.w=parseInt(r[0][0],10),a.h=parseInt(r[0][1],10),r=r.splice(1,r.length-1)}r.length>0&&(t=[],r.forEach((function(e){e.length>1&&t.push({w:e[0],h:e[1]})})),t.length>0&&(a.format=t)),a.pos=0,a.topframe=i.inIframe()?0:1}else i.logWarn("PubMatic: Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),a=void 0;return a}function x(e){var a,r=e.params.video;if(void 0!==r){for(var t in a={},m)r.hasOwnProperty(t)&&(a[t]=S(t,r[t],m[t]));i.isArray(e.mediaTypes.video.playerSize[0])?(a.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),a.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):i.isNumber(e.mediaTypes.video.playerSize[0])&&(a.w=parseInt(e.mediaTypes.video.playerSize[0],10),a.h=parseInt(e.mediaTypes.video.playerSize[1],10)),e.params.video.hasOwnProperty("skippable")&&(a.ext={video_skippable:e.params.video.skippable?1:0})}else a=void 0,i.logWarn("PubMatic: Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return a}function A(e,a){var r,t,n={},o={},d=e.hasOwnProperty("sizes")?e.sizes:[],p="",c=[];if(function(e,a){a.params.deals&&(i.isArray(a.params.deals)?a.params.deals.forEach((function(a){i.isStr(a)&&a.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:a})):i.logWarn("PubMatic: Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+a)})):i.logWarn("PubMatic: Error: bid.params.deals should be an array of strings."))}(n={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:T("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:T("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?T("currency",e.params.currency):"USD"},e),e.hasOwnProperty("mediaTypes"))for(p in e.mediaTypes)switch(p){case s.b:void 0!==(r=k(e))&&(n.banner=r);break;case s.c:o.request=JSON.stringify(Y(e.nativeParams)),E?i.logWarn("PubMatic: Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."):n.native=o;break;case s.d:void 0!==(t=x(e))&&(n.video=t)}else r={pos:0,w:e.params.width,h:e.params.height,topframe:i.inIframe()?0:1},i.isArray(d)&&d.length>1&&((d=d.splice(1,d.length-1)).forEach((function(e){c.push({w:e[0],h:e[1]})})),r.format=c),n.banner=r;return n.hasOwnProperty(s.b)||n.hasOwnProperty(s.c)||n.hasOwnProperty(s.d)?n:void 0}function z(e){var a=function(e){var a,r=(a=window.DigiTrust&&(n.b.getConfig("digiTrustId")||window.DigiTrust.getUser({member:e})))&&a.success&&a.identity||null;return!r||r.privacy&&r.privacy.optout?null:r}("nFIn8aLzbd");null!==a&&e.push({source:"digitru.st",uids:[{id:a.id||"",atype:1,ext:{keyv:parseInt(a.keyv)||0}}]})}function K(e,a,r,t){i.isStr(a)&&e.push({source:r,uids:[{id:a,atype:t}]})}function C(e,a){var r=[];z(r),function(e,a){var r=null,t=n.b.getConfig("adsrvrOrgId");i.isStr(i.deepAccess(a,"0.userId.tdid"))?r=a[0].userId.tdid:t&&i.isStr(t.TDID)&&(r=t.TDID),null!==r&&e.push({source:"adserver.org",uids:[{id:r,atype:1,ext:{rtiPartner:"TDID"}}]})}(r,a);var t=a[0];t&&t.userId&&(K(r,i.deepAccess(t,"userId.pubcid"),"pubcid.org",1),K(r,i.deepAccess(t,"userId.digitrustid.data.id"),"digitru.st",1),K(r,i.deepAccess(t,"userId.id5id"),"id5-sync.com",1),K(r,i.deepAccess(t,"userId.criteoId"),"criteo.com",1),K(r,i.deepAccess(t,"userId.idl_env"),"liveramp.com",1),K(r,i.deepAccess(t,"userId.lipb.lipbid"),"liveintent.com",1),K(r,i.deepAccess(t,"userId.parrableid"),"parrable.com",1),K(r,i.deepAccess(t,"userId.britepoolid"),"britepool.com",1)),r.length>0&&(e.user.eids=r)}i._each(g,(function(e){w[e.ID]=e.KEY})),i._each(g,(function(e){P[e.KEY]=e}));var N={code:"pubmatic",supportedMediaTypes:[s.b,s.d,s.c],isBidRequestValid:function(e){return!(!e||!e.params)&&(i.isStr(e.params.publisherId)?!!(!e.params.hasOwnProperty("video")||e.params.video.hasOwnProperty("mimes")&&i.isArray(e.params.video.mimes)&&0!==e.params.video.mimes.length)||(i.logWarn("PubMatic: Error: For video ads, mimes is mandatory and must specify atlease 1 mime value. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1):(i.logWarn("PubMatic: Error: publisherId is mandatory and cannot be numeric. Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1))},buildRequests:function(e,a){var r;a&&a.refererInfo&&(r=a.refererInfo);var t,p,c,u=function(e){return{pageURL:e&&e.referer?e.referer:window.location.href,refURL:window.document.referrer}}(r),l=function(e){return{id:""+(new Date).getTime(),at:1,cur:["USD"],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}}(u),m="",g=[],h=[];if(e.forEach((function(e){if((t=i.deepClone(e)).params.adSlot=t.params.adSlot||"",D(t),t.params.hasOwnProperty("video"));else if(!(t.hasOwnProperty("mediaTypes")&&t.mediaTypes.hasOwnProperty(s.c)||0!==t.params.width||0!==t.params.height))return void i.logWarn("PubMatic: Skipping the non-standard adslot: ",t.params.adSlot,JSON.stringify(t));u.pubId=u.pubId||t.params.publisherId,(u=function(e,a){var r,t,s;for(r in a.kadpageurl||(a.kadpageurl=a.pageURL),d)d.hasOwnProperty(r)&&(t=e[r])&&("object"===o(s=d[r])&&(t=s.f(t,a)),i.isStr(t)?a[r]=t:i.logWarn("PubMatic: Ignoring param : "+r+" with value : "+d[r]+", expects string-value, found "+o(t)));return a}(t.params,u)).transactionId=t.transactionId,""===m?m=t.params.currency||void 0:t.params.hasOwnProperty("currency")&&m!==t.params.currency&&i.logWarn("PubMatic: Currency specifier ignored. Only one currency permitted."),t.params.currency=m,t.params.hasOwnProperty("dctr")&&i.isStr(t.params.dctr)&&g.push(t.params.dctr),t.params.hasOwnProperty("bcat")&&i.isArray(t.params.bcat)&&(h=h.concat(t.params.bcat));var a=A(t);a&&l.imp.push(a)})),0!=l.imp.length)return l.site.publisher.id=u.pubId.trim(),I=u.pubId.trim(),l.ext.wrapper={},l.ext.wrapper.profile=parseInt(u.profId)||void 0,l.ext.wrapper.version=parseInt(u.verId)||void 0,l.ext.wrapper.wiid=u.wiid||void 0,l.ext.wrapper.wv="prebid_prebid_3.11.0",l.ext.wrapper.transactionId=u.transactionId,l.ext.wrapper.wp="pbjs",l.user.gender=u.gender?u.gender.trim():void 0,l.user.geo={},l.user.geo.lat=T("lat",u.lat),l.user.geo.lon=T("lon",u.lon),l.user.yob=T("yob",u.yob),l.device.geo=l.user.geo,l.site.page=u.kadpageurl.trim()||l.site.page.trim(),l.site.domain=(p=l.site.page,(c=document.createElement("a")).href=p,c.hostname),i.deepSetValue(l,"source.tid",u.transactionId),-1!==window.location.href.indexOf("pubmaticTest=true")&&(l.test=1),e[0].schain&&i.deepSetValue(l,"source.ext.schain",e[0].schain),a&&a.gdprConsent&&(i.deepSetValue(l,"user.ext.consent",a.gdprConsent.consentString),i.deepSetValue(l,"regs.ext.gdpr",a.gdprConsent.gdprApplies?1:0)),a&&a.uspConsent&&i.deepSetValue(l,"regs.ext.us_privacy",a.uspConsent),!0===n.b.getConfig("coppa")&&i.deepSetValue(l,"regs.coppa",1),function(e,a,r){var t,s="";if(a.length>0)if(r[0].params.hasOwnProperty("dctr")){if(s=r[0].params.dctr,i.isStr(s)&&s.length>0){var n=s.split("|");s="",n.forEach((function(e){s+=e.length>0?e.trim()+"|":""})),t=s.length,"|"===s.substring(t,t-1)&&(s=s.substring(0,t-1)),e.site.ext={key_val:s.trim()}}else i.logWarn("PubMatic: Ignoring param : dctr with value : "+s+", expects string-value, found empty or non-string value");a.length>1&&i.logWarn("PubMatic: dctr value found in more than 1 adunits. Value from 1st adunit will be picked. Ignoring values from subsequent adunits")}else i.logWarn("PubMatic: dctr value not found in 1st adunit, ignoring values from subsequent adunits")}(l,g,e),C(l,e),function(e,a){(a=a.filter((function(e){return"string"==typeof e||(i.logWarn("PubMatic: bcat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,a,r){if(e.length>3)return r.indexOf(e)===a;i.logWarn("PubMatic: bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&(i.logWarn("PubMatic: bcat: Selected: ",a),e.bcat=a)}(l,h),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(l)}},interpretResponse:function(e,a){var r=[],t="USD",n=JSON.parse(a.data),o=n.site&&n.site.ref?n.site.ref:"";try{e.body&&e.body.seatbid&&i.isArray(e.body.seatbid)&&(t=e.body.cur||t,e.body.seatbid.forEach((function(e){e.bid&&i.isArray(e.bid)&&e.bid.forEach((function(e){var a={requestId:e.impid,cpm:(parseFloat(e.price)||0).toFixed(2),width:e.w,height:e.h,creativeId:e.crid||e.id,dealId:e.dealid,currency:t,netRevenue:!1,ttl:300,referrer:o,ad:e.adm};n.imp&&n.imp.length>0&&n.imp.forEach((function(r){if(e.impid===r.id)switch(function(e,a){var r="",t=new RegExp(/VAST\s+version/);if(e.indexOf('span class="PubAPIAd"')>=0)a.mediaType=s.b;else if(t.test(e))a.mediaType=s.d;else try{(r=JSON.parse(e.replace(/\\/g,"")))&&r.native&&(a.mediaType=s.c)}catch(a){i.logWarn("PubMatic: Error: Cannot parse native reponse for ad response: "+e)}}(e.adm,a),a.mediaType){case s.b:break;case s.d:a.width=e.hasOwnProperty("w")?e.w:r.video.w,a.height=e.hasOwnProperty("h")?e.h:r.video.h,a.vastXml=e.adm;break;case s.c:!function(e,a){if(a.native={},e.hasOwnProperty("adm")){var r="";try{r=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void i.logWarn("PubMatic: Error: Cannot parse native reponse for ad response: "+a.adm)}if(r&&r.native&&r.native.assets&&r.native.assets.length>0){a.mediaType=s.c;for(var t=0,n=r.native.assets.length;t<n;t++)switch(r.native.assets[t].id){case g.TITLE.ID:a.native.title=r.native.assets[t].title&&r.native.assets[t].title.text;break;case g.IMAGE.ID:a.native.image={url:r.native.assets[t].img&&r.native.assets[t].img.url,height:r.native.assets[t].img&&r.native.assets[t].img.h,width:r.native.assets[t].img&&r.native.assets[t].img.w};break;case g.ICON.ID:a.native.icon={url:r.native.assets[t].img&&r.native.assets[t].img.url,height:r.native.assets[t].img&&r.native.assets[t].img.h,width:r.native.assets[t].img&&r.native.assets[t].img.w};break;case g.SPONSOREDBY.ID:case g.BODY.ID:case g.LIKES.ID:case g.DOWNLOADS.ID:case g.PRICE:case g.SALEPRICE.ID:case g.PHONE.ID:case g.ADDRESS.ID:case g.DESC2.ID:case g.CTA.ID:case g.RATING.ID:case g.DISPLAYURL.ID:a.native[w[r.native.assets[t].id]]=r.native.assets[t].data&&r.native.assets[t].data.value}a.native.clickUrl=r.native.link&&r.native.link.url,a.native.clickTrackers=r.native.link&&r.native.link.clicktrackers||[],a.native.impressionTrackers=r.native.imptrackers||[],a.native.jstracker=r.native.jstracker||[],a.width||(a.width=0),a.height||(a.height=0)}}}(e,a)}})),e.ext&&e.ext.deal_channel&&(a.dealChannel=y[e.ext.deal_channel]||null),a.meta={},e.ext&&e.ext.dspid&&(a.meta.networkId=e.ext.dspid),e.ext&&e.ext.advid&&(a.meta.buyerId=e.ext.advid),e.adomain&&e.adomain.length>0&&(a.meta.clickUrl=e.adomain[0]),r.push(a)}))})))}catch(e){i.logError(e)}return r},getUserSyncs:function(e,a,r,t){var s="https://ads.pubmatic.com/AdServer/js/showad.js#PIX&kdntuid=1&p="+I;if(r&&(s+="&gdpr="+(r.gdprApplies?1:0),s+="&gdpr_consent="+encodeURIComponent(r.consentString||"")),t&&(s+="&us_privacy="+encodeURIComponent(t)),!0===n.b.getConfig("coppa")&&(s+="&coppa=1"),e.iframeEnabled)return[{type:"iframe",url:s}];i.logWarn("PubMatic: Please enable iframe based user sync.")},transformBidParams:function(e,a){return i.convertTypes({publisherId:"string",adSlot:"string"},e)}};Object(t.registerBidder)(N)}}]);