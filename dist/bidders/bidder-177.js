(window.webpackJsonpreact_ads=window.webpackJsonpreact_ads||[]).push([[177],{134:function(e,r,a){"use strict";a.r(r),a.d(r,"spec",(function(){return s}));var n=a(277),i=a(278),t=a(279),s={code:"lemma",supportedMediaTypes:[t.b,t.d],isBidRequestValid:function(e){return!(!e||!e.params)&&(n.isNumber(e.params.pubId)?e.params.adunitId?!!(!e.params.hasOwnProperty("video")||e.params.video.hasOwnProperty("mimes")&&n.isArray(e.params.video.mimes)&&0!==e.params.video.mimes.length)||(n.logWarn("LEMMA: Error: For video ads, mimes is mandatory and must specify atlease 1 mime value. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1):(n.logWarn("LEMMA: Error: adUnitId is mandatory. Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1):(n.logWarn("LEMMA: Error: publisherId is mandatory and cannot be string. Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1))},buildRequests:function(e,r){var a;r&&r.refererInfo&&(a=r.refererInfo);var i=function(e,r){try{var a={id:""+(new Date).getTime(),at:2,tmax:300,cur:["USD"],imp:o(e),user:{},ext:{}},i=e[0],t=function(e){var r=e&&e.params?e.params:null;if(r){var a=r.pubId?r.pubId:0,n=r.app;if(n)return{publisher:{id:a.toString()},id:n.id,name:n.name,bundle:n.bundle,storeurl:n.storeUrl,domain:n.domain,cat:n.categories,pagecat:n.page_category}}return null}(i),s=function(e,r){var a=e&&e.params?e.params:null;if(a){var n=a.pubId?a.pubId:"0",i=a.siteId?a.siteId:"0";if(!a.app)return{publisher:{id:n.toString()},domain:d(r.pageURL),id:i.toString(),ref:r.refURL,page:r.pageURL}}return null}(i,r),u=function(e){var r=e&&e.params?e.params:null;if(r)return{dnt:n.getDNT()?1:0,ua:navigator.userAgent,language:navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage,w:window.screen.width||window.innerWidth,h:window.screen.height||window.innerHeigh,geo:{country:r.country,lat:r.latitude,lon:r.longitude,region:r.region,city:r.city,zip:r.zip},ip:r.ip,devicetype:r.device_type,ifa:r.ifa};return null}(i);return t&&(a.app=t),s&&(a.site=s),u&&(a.device=u),a}catch(e){n.logError("LEMMA: ","ERROR ",e)}}(e,function(e){var r={};r.pageURL=e&&e.referer?e.referer:window.location.href,e&&e.referer?r.refURL=e.referer:r.refURL="";return r}(a));if(0!=i.imp.length)return function(e,r){var a=e&&e.params?e.params:null;e&&e.gdprConsent&&(r.regs={ext:{gdpr:e.gdprConsent.gdprApplies?1:0}},r.user={ext:{consent:e.gdprConsent.consentString}});a&&(r.tmax=a.tmax,r.bcat=a.bcat)}(r,i),{method:"POST",url:function(e){var r=e&&e[0].params?e[0].params:null;if(r){var a=r.pubId?r.pubId:0,n=r.adunitId?r.adunitId:0;return"https://ads.lemmatechnologies.com/lemma/servad?pid="+a+"&aid="+n}return null}(e),data:JSON.stringify(i)}},interpretResponse:function(e,r){return function(e,r){var a=[];try{if(r.seatbid){var i=r.curr||"USD";r.seatbid.forEach((function(r){r.bid.forEach((function(r){var s=function(e){try{if(e)return JSON.parse(e)}catch(e){n.logError("LEMMA: ","ERROR",e)}return null}(e.data),o={requestId:r.impid,cpm:parseFloat(r.price).toFixed(2),width:r.w,height:r.h,creativeId:r.crid,currency:i,netRevenue:!1,ttl:300,referrer:s.site.ref,ad:r.adm};r.dealid&&(o.dealId=r.dealid),s.imp&&s.imp.length>0&&(o.mediaType=s.mediaType,s.imp.forEach((function(e){if(r.impid===e.id)switch(o.mediaType){case t.b:break;case t.d:o.width=r.hasOwnProperty("w")?r.w:e.video.w,o.height=r.hasOwnProperty("h")?r.h:e.video.h,o.vastXml=r.adm}}))),a.push(o)}))}))}}catch(e){n.logError("LEMMA: ","ERROR ",e)}return a}(r,e.body)}};function o(e){var r=[],a=e.map((function(e){return function(e){var r,a,i={},s=e.hasOwnProperty("sizes")?e.sizes:[],o="",d=[],u=e&&e.params?e.params:null;i={id:e.bidId,tagid:u.adunitId?u.adunitId.toString():void 0,secure:"https:"===window.location.protocol?1:0,bidfloorcur:u.currency?u.currency:"USD"},u.bidFloor&&(i.bidfloor=u.bidFloor);if(e.hasOwnProperty("mediaTypes"))for(o in e.mediaTypes)switch(o){case t.b:(r=p(e))&&(i.banner=r);break;case t.d:(a=l(e))&&(i.video=a)}else r={pos:0,w:s&&s[0]?s[0][0]:0,h:s&&s[0]?s[0][1]:0},n.isArray(s)&&s.length>1&&((s=s.splice(1,s.length-1)).forEach((function(e){d.push({w:e[0],h:e[1]})})),r.format=d),i.banner=r;return i.hasOwnProperty(t.b)||i.hasOwnProperty(t.d)?i:void 0}(e)}));return a&&a.forEach((function(e){e&&r.push(e)})),r}function d(e){var r=document.createElement("a");return r.setAttribute("href",e),r.hostname}function u(e){return e.sizes&&n.isArray(e.sizes[0])&&e.sizes[0].length>0?e.sizes[0]:null}function p(e){var r,a=[];if("banner"===e.mediaType||n.deepAccess(e,"mediaTypes.banner")){var i=(e?e.params:null).banner,t=u(e)||[];t&&0==t.length&&(t=e.mediaTypes.banner.sizes[0]),t&&t.length>0?((r={}).w=t[0],r.h=t[1],r.pos=0,i&&(r=n.deepClone(i)),(t=e.mediaTypes.banner.sizes).length>0&&(a=[],t.forEach((function(e){e.length>1&&a.push({w:e[0],h:e[1]})})),a.length>0&&(r.format=a))):n.logWarn("LEMMA: Error: mediaTypes.banner.sizes missing for adunit: "+e.params.adunitId)}return r}function l(e){var r;if("video"===e.mediaType||n.deepAccess(e,"mediaTypes.video")){var a=e?e.params:null,i=u(e)||[];if(i&&0==i.length&&(i=e.mediaTypes&&e.mediaTypes.video?e.mediaTypes.video.playerSize:[]),i&&i.length>0){var t=a.video;r={},t&&(r=n.deepClone(t)),r.w=i[0],r.h=i[1]}else n.logWarn("LEMMA: Error: mediaTypes.video.sizes missing for adunit: "+e.params.adunitId)}return r}Object(i.registerBidder)(s)}}]);