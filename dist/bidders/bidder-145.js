(window.webpackJsonpreact_ads=window.webpackJsonpreact_ads||[]).push([[145],{82:function(e,r,a){"use strict";a.r(r),a.d(r,"spec",(function(){return n}));var i=a(277),t=a(278),s=a(279),n={code:"conversant",aliases:["cnvr"],supportedMediaTypes:[s.b,s.d],isBidRequestValid:function(e){if(!e||!e.params)return i.logWarn("conversant: Missing bid parameters"),!1;if(!i.isStr(e.params.site_id))return i.logWarn("conversant: site_id must be specified as a string"),!1;if(o(e))if(e.params.mimes){if(!i.isArray(e.params.mimes)||!e.params.mimes.every((function(e){return i.isStr(e)})))return i.logWarn("conversant: mimes must be an array of strings"),!1}else i.logWarn("conversant: mimes should be specified for videos");return!0},buildRequests:function(e,r){var a,t=r&&r.refererInfo?r.refererInfo.referer:"",s="",n="",u=null,m="_pubcid",g=e.map((function(e){var r=i.getBidIdParameter("bidfloor",e.params);s=i.getBidIdParameter("site_id",e.params)||s,m=i.getBidIdParameter("pubcid_name",e.params)||m,n=e.auctionId;var a={id:e.bidId,secure:1,bidfloor:r||0,displaymanager:"Prebid.js",displaymanagerver:"3.11.0"};if(p(e.params.tag_id,a,"tagid"),o(e)){var t=i.deepAccess(e,"mediaTypes.video")||{},c=d(t.playerSize||e.sizes),g={};c&&c[0]&&(p(c[0].w,g,"w"),p(c[0].h,g,"h")),p(e.params.position,g,"pos"),p(e.params.mimes||t.mimes,g,"mimes"),p(e.params.maxduration,g,"maxduration"),p(e.params.protocols||t.protocols,g,"protocols"),p(e.params.api||t.api,g,"api"),a.video=g}else{var v={format:d((i.deepAccess(e,"mediaTypes.banner")||{}).sizes||e.sizes)};p(e.params.position,v,"pos"),a.banner=v}return e.userId&&e.userId.pubcid?u=e.userId.pubcid:e.crumbs&&e.crumbs.pubcid&&(u=e.crumbs.pubcid),a})),v={id:n,imp:g,site:{id:s,mobile:null!==document.querySelector('meta[name="viewport"][content*="width=device-width"]')?1:0,page:t},device:(a=navigator.language?"language":"userLanguage",{h:screen.height,w:screen.width,dnt:"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNoTrack||"yes"===navigator.doNotTrack?1:0,language:navigator[a].split("-")[0],make:navigator.vendor?navigator.vendor:"",ua:navigator.userAgent}),at:1},l={};r&&(r.gdprConsent&&(l.consent=r.gdprConsent.consentString,"boolean"==typeof r.gdprConsent.gdprApplies&&i.deepSetValue(v,"regs.ext.gdpr",r.gdprConsent.gdprApplies?1:0)),r.uspConsent&&i.deepSetValue(v,"regs.ext.us_privacy",r.uspConsent)),u||(u=function(e){var r;try{if(!(r=i.getCookie(e))){var a=i.getDataFromLocalStorage("".concat(e,"_exp"));(""===a||a&&new Date(a).getTime()-Date.now()>0)&&(r=(r=i.getDataFromLocalStorage(e))?decodeURIComponent(r):r)}i.isStr(r)&&"{"===r.charAt(0)&&(r=JSON.parse(r))}catch(e){i.logError(e)}return r}(m)),u&&(l.fpc=u);var f=function(e){var r=e[0],a=[];return c(a,r,"userId.tdid","adserver.org"),c(a,r,"userId.idl_env","liveramp.com"),c(a,r,"userId.criteoId","criteo.com"),c(a,r,"userId.id5id","id5-sync.com"),c(a,r,"userId.parrableid","parrable.com"),c(a,r,"userId.digitrustid.data.id","digitru.st"),c(a,r,"userId.lipb.lipbid","liveintent.com"),a}(e);return f.length>0&&(l.eids=f),i.isEmpty(l)||(v.user={ext:l}),{method:"POST",url:"https://web.hb.ad.cpe.dotomi.com/s2s/header/24",data:v}},interpretResponse:function(e,r){var a=[],t={};return e=e.body,r&&r.data&&r.data.imp&&i._each(r.data.imp,(function(e){return t[e.id]=e})),e&&i.isArray(e.seatbid)&&i._each(e.seatbid,(function(r){i._each(r.bid,(function(r){var i=parseFloat(r.price);if(i>0&&r.impid){var s=r.adm||"",n=r.nurl||"",d=t[r.impid],o={requestId:r.impid,currency:e.cur||"USD",cpm:i,creativeId:r.crid||"",ttl:300,netRevenue:!0};d.video?("<"===s.charAt(0)?o.vastXml=s:o.vastUrl=s,o.mediaType="video",o.width=d.video.w,o.height=d.video.h):(o.ad=s+'<img src="'+n+'" />',o.width=r.w,o.height=r.h),a.push(o)}}))})),a},transformBidParams:function(e,r){return i.convertTypes({site_id:"string",secure:"number",mobile:"number"},e)}};function d(e){var r;return Array.isArray(e)&&(r=2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]?[{w:e[0],h:e[1]}]:i._map(e,(function(e){return{w:e[0],h:e[1]}}))),r}function o(e){return"video"===e.mediaType||!!i.deepAccess(e,"mediaTypes.video")}function p(e,r,a){e&&(r[a]=e)}function c(e,r,a,t){var s=i.deepAccess(r,a);s&&e.push({source:t,uids:[{id:s,atype:1}]})}Object(t.registerBidder)(n)}}]);