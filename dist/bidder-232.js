(window.webpackJsonp=window.webpackJsonp||[]).push([[232],{310:function(e,t,r){"use strict";r.r(t),r.d(t,"GOOGLE_CONSENT",(function(){return n})),r.d(t,"spec",(function(){return p}));var a=r(0),d=r(16),i=r(55),s=r(13);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={consented_providers:["3","7","11","12","15","20","22","35","43","46","48","55","57","61","62","66","70","80","83","85","86","89","93","108","122","124","125","126","131","134","135","136","143","144","147","149","153","154","159","161","162","165","167","171","178","184","188","192","195","196","202","209","211","218","221","228","229","230","236","239","241","253","255","259","266","271","272","274","286","291","294","303","308","310","311","313","314","316","317","322","323","327","336","338","340","348","350","358","359","363","367","370","371","384","385","389","393","394","397","398","407","414","415","424","429","430","432","436","438","440","442","443","445","448","449","453","459","479","482","486","491","492","494","495","503","505","510","522","523","528","537","540","550","559","560","568","571","574","575","576","584","585","587","588","590","591","592","595","609","621","624","723","725","733","737","776","780","782","787","797","798","802","803","814","817","820","821","827","829","839","853","864","867","874","899","904","922","926","931","932","933","938","955","973","976","979","981","985","987","991","1003","1024","1025","1027","1028","1029","1033","1034","1040","1047","1048","1051","1052","1053","1054","1062","1063","1067","1072","1085","1092","1095","1097","1099","1100","1107","1126","1127","1143","1149","1152","1162","1166","1167","1170","1171","1172","1188","1192","1199","1201","1204","1205","1211","1212","1215","1220","1225","1226","1227","1230","1232","1236","1241","1248","1250","1252","1268","1275","1276","1284","1286","1298","1301","1307","1312","1313","1317","1329","1336","1344","1345","1356","1362","1365","1375","1403","1409","1411","1415","1416","1419","1423","1440","1442","1449","1451","1455","1456","1468","1496","1503","1509","1512","1514","1517","1520","1525","1540","1547","1548","1555","1558","1570","1575","1577","1579","1583","1584","1591","1598","1603","1608","1613","1616","1626","1631","1633","1638","1642","1648","1651","1652","1653","1660","1665","1667","1669","1671","1674","1677","1678","1682","1684","1697","1703","1705","1716","1720","1721","1722","1725","1732","1733","1735","1739","1741","1745","1750","1753","1760","1765","1769","1776","1780","1782","1786","1791","1794","1799","1800","1801","1810","1827","1831","1832","1834","1837","1840","1843","1844","1845","1858","1859","1863","1866","1870","1872","1875","1878","1880","1882","1883","1889","1892","1896","1898","1899","1902","1905","1911","1922","1928","1929","1934","1942","1943","1944","1945","1958","1960","1962","1963","1964","1967","1968","1978","1985","1986","1987","1998","2003","2007","2012","2013","2027","2035","2038","2039","2044","2047","2052","2056","2059","2062","2064","2068","2070","2072","2078","2079","2084","2088","2090","2095","2100","2103","2107","2109","2113","2115","2121","2127","2130","2133","2137","2140","2141","2145","2147","2150","2156","2166","2170","2171","2176","2177","2179","2183","2186","2192","2198","2202","2205","2214","2216","2219","2220","2222","2223","2224","2225","2227","2228","2234","2238","2247","2251","2253","2262","2264","2271","2276","2278","2279","2282","2290","2292","2295","2299","2305","2306","2310","2311","2312","2315","2320","2325","2328","2331","2334","2335","2336","2337","2343","2346","2354","2357","2358","2359","2366","2370","2373","2376","2377","2380","2382","2387","2389","2392","2394","2400","2403","2405","2406","2407","2410","2411","2413","2414","2415","2416","2418","2422","2425","2427","2435","2437","2440","2441","2447","2453","2459","2461","2462","2464","2467","2468","2472","2477","2481","2484","2486","2492","2493","2496","2497","2498","2499","2504","2506","2510","2511","2512","2517","2526","2527","2531","2532","2534","2542","2544","2552","2555","2559","2563","2564","2567","2568","2569","2571","2572","2573","2575","2577","2579","2583","2584","2586","2589","2595","2596","2597","2601","2604","2605","2609","2610","2612","2614","2621","2622","2624","2628","2629","2632","2634","2636","2639","2643","2645","2646","2647","2649","2650","2651","2652","2656","2657","2658","2660","2661","2662","2663","2664","2669","2670","2673","2676","2677","2678","2681","2682","2684","2685","2686","2689","2690","2691","2695","2698","2699","2702","2704","2705","2706","2707","2709","2710","2713","2714","2727","2729","2739","2758","2765","2766","2767","2768","2770","2771","2772","2776","2777","2778","2779","2780","2783","2784","2786","2787","2791","2792","2793","2797","2798","2801","2802","2803","2805","2808","2809","2810","2811","2812","2813","2814","2817","2818","2824","2826","2827","2829","2830","2831","2832","2834","2836","2838","2840","2842","2843","2844","2850","2851","2852","2854","2858","2860","2862","2864","2865","2866","2867","2868","2869","2871"]},p={code:"spotx",aliases:["spotx"],supportedMediaTypes:[s.d],isBidRequestValid:function(e){if(e&&"object"!==o(e.params))return a.logError("spotx: params is not defined or is incorrect in the bidder settings."),!1;if(!a.deepAccess(e,"mediaTypes.video"))return a.logError("spotx: mediaTypes.video is not present in the bidder settings."),!1;var t=a.deepAccess(e,"mediaTypes.video.playerSize");if(!t||!a.isArray(t))return a.logError("spotx: mediaTypes.video.playerSize is not defined in the bidder settings."),!1;if(!a.getBidIdParameter("channel_id",e.params))return a.logError("spotx: channel_id is not present in bidder params"),!1;if(("outstream"==a.deepAccess(e,"mediaTypes.video.context")||"outstream"==a.deepAccess(e,"params.ad_unit"))&&!a.getBidIdParameter("outstream_function",e.params)){if(!a.getBidIdParameter("outstream_options",e.params))return a.logError("spotx: please define outstream_options parameter or override the default SpotX outstream rendering by defining your own Outstream function using field outstream_function."),!1;if(!a.getBidIdParameter("slot",e.params.outstream_options))return a.logError("spotx: please define parameters slot outstream_options object in the configuration."),!1}return!0},buildRequests:function(e,t){var r=t.refererInfo.referer,d=!!r.match(/^https:/);return e.map((function(e){var i=a.getBidIdParameter("channel_id",e.params),s=null,o=a.deepAccess(e,"mediaTypes.video.playerSize"),p=o[0][0],c=o[0][1],m=d||(a.getBidIdParameter("secure",e.params)?1:0),u={sdk_name:"Prebid 1+",versionOrtb:"2.3"};if(""!=a.getBidIdParameter("hide_skin",e.params)&&(u.hide_skin=+!!a.getBidIdParameter("hide_skin",e.params)),""!=a.getBidIdParameter("ad_volume",e.params)&&(u.ad_volume=a.getBidIdParameter("ad_volume",e.params)),""!=a.getBidIdParameter("ad_unit",e.params)&&(u.ad_unit=a.getBidIdParameter("ad_unit",e.params)),""!=a.getBidIdParameter("outstream_options",e.params)&&(u.outstream_options=a.getBidIdParameter("outstream_options",e.params)),""!=a.getBidIdParameter("outstream_function",e.params)&&(u.outstream_function=a.getBidIdParameter("outstream_function",e.params)),""!=a.getBidIdParameter("custom",e.params)&&(u.custom=a.getBidIdParameter("custom",e.params)),""!=a.getBidIdParameter("pre_market_bids",e.params)&&a.isArray(a.getBidIdParameter("pre_market_bids",e.params))){var g=a.getBidIdParameter("pre_market_bids",e.params);for(var _ in u.pre_market_bids=[],g){var l=g[_],v="";l.vast_url?v='<?xml version="1.0" encoding="utf-8"?><VAST version="2.0"><Ad><Wrapper><VASTAdTagURI>'+l.vast_url+"</VASTAdTagURI></Wrapper></Ad></VAST>":l.vast_string&&(v=l.vast_string),u.pre_market_bids.push({id:l.deal_id,seatbid:[{bid:[{impid:Date.now(),dealid:l.deal_id,price:l.price,adm:v}]}],cur:l.currency,ext:{event_log:[{}]}})}}var f=a.getBidIdParameter("mimes",e.params)||["application/javascript","video/mp4","video/webm"],h={id:e.bidId,secure:m,video:{w:p,h:c,ext:u,mimes:f}};""!=a.getBidIdParameter("price_floor",e.params)&&(h.bidfloor=a.getBidIdParameter("price_floor",e.params)),""!=a.getBidIdParameter("start_delay",e.params)&&(h.video.startdelay=0+Boolean(a.getBidIdParameter("start_delay",e.params))),e.crumbs&&e.crumbs.pubcid&&(s=e.crumbs.pubcid);var y=navigator.language?"language":"userLanguage",b={h:screen.height,w:screen.width,dnt:a.getDNT()?1:0,language:navigator[y].split("-")[0],make:navigator.vendor?navigator.vendor:"",ua:navigator.userAgent},I={id:i,imp:h,site:{id:"",page:r,content:"content"},device:b,ext:{wrap_response:1}};a.getBidIdParameter("number_of_ads",e.params)&&(I.ext.number_of_ads=a.getBidIdParameter("number_of_ads",e.params));var P={};return 1==a.getBidIdParameter("spotx_all_google_consent",e.params)&&(P.consented_providers_settings=n),t&&t.gdprConsent&&(P.consent=t.gdprConsent.consentString,void 0!==t.gdprConsent.gdprApplies&&a.deepSetValue(I,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&a.deepSetValue(I,"regs.ext.us_privacy",t.uspConsent),e&&e.userId&&e.userId.id5id&&(P.eids=P.eids||[],P.eids.push({source:"id5-sync.com",uids:[{id:e.userId.id5id}]})),s&&(P.fpc=s),e&&e.schain&&(I.source={ext:{schain:e.schain}}),e&&e.userId&&e.userId.tdid&&(P.eids=P.eids||[],P.eids.push({source:"adserver.org",uids:[{id:e.userId.tdid,ext:{rtiPartner:"TDID"}}]})),a.isEmpty(P)||(I.user={ext:P}),{method:"POST",url:"https://search.spotxchange.com/openrtb/2.3/dados/"+i,data:I,bidRequest:t}}))},interpretResponse:function(e,t){var r=[],i=e.body;return i&&a.isArray(i.seatbid)&&a._each(i.seatbid,(function(e){a._each(e.bid,(function(e){var o={};for(var n in t.bidRequest.bids)e.impid==t.bidRequest.bids[n].bidId&&(o=t.bidRequest.bids[n]);a._each(o.params.pre_market_bids,(function(t){t.deal_id==e.id&&(e.price=t.price,i.cur=t.currency)}));var p={requestId:o.bidId,currency:i.cur||"USD",cpm:e.price,creativeId:e.crid||"",ttl:360,netRevenue:!0,channel_id:i.id,cache_key:e.ext.cache_key,vastUrl:"https://search.spotxchange.com/ad/vast.html?key="+e.ext.cache_key,videoCacheKey:e.ext.cache_key,mediaType:s.d,width:e.w,height:e.h},m=a.deepAccess(o,"mediaTypes.video.context"),u=a.deepAccess(o,"params.ad_unit");if("outstream"==m||"outstream"==u){var g=a.deepAccess(o,"mediaTypes.video.playerSize"),_=d.a.install({id:0,url:"//",config:{adText:"SpotX Outstream Video Ad via Prebid.js",player_width:g[0][0],player_height:g[0][1],content_page_url:a.deepAccess(t,"data.site.page"),ad_mute:+!!a.deepAccess(o,"params.ad_mute"),hide_skin:+!!a.deepAccess(o,"params.hide_skin"),outstream_options:a.deepAccess(o,"params.outstream_options"),outstream_function:a.deepAccess(o,"params.outstream_function")}});try{_.setRender(c),_.setEventHandlers({impression:function(){return a.logMessage("SpotX outstream video impression event")},loaded:function(){return a.logMessage("SpotX outstream video loaded event")},ended:function(){a.logMessage("SpotX outstream renderer video event")}})}catch(e){a.logWarn("Prebid Error calling setRender or setEve,tHandlers on renderer",e)}p.renderer=_}r.push(p)}))})),r}};function c(e){var t=function(e){var t=a.getBidIdParameter("slot",e.renderer.config.outstream_options);a.logMessage("[SPOTX][renderer] Handle SpotX outstream renderer");var r=window.document.createElement("script");r.type="text/javascript",r.src="https://js.spotx.tv/easi/v1/"+e.channel_id+".js";var d={};d["data-spotx_channel_id"]=""+e.channel_id,d["data-spotx_vast_url"]=""+e.vastUrl,d["data-spotx_content_page_url"]=e.renderer.config.content_page_url,d["data-spotx_ad_unit"]="incontent",a.logMessage("[SPOTX][renderer] Default beahavior"),a.getBidIdParameter("ad_mute",e.renderer.config.outstream_options)&&(d["data-spotx_ad_mute"]="0"),d["data-spotx_collapse"]="0",d["data-spotx_autoplay"]="1",d["data-spotx_blocked_autoplay_override_mode"]="1",d["data-spotx_video_slot_can_autoplay"]="1";var i=a.getBidIdParameter("playersize_auto_adapt",e.renderer.config.outstream_options);if(i&&a.isBoolean(i)&&!0===i)if(e.width&&a.isNumber(e.width)&&e.height&&a.isNumber(e.height)){var s=e.width/e.height,o=window.document.getElementById(t).clientWidth,n=e.renderer.config.player_width,p=e.renderer.config.player_height,c=0,m=0;o<n&&(p=(n=o)/s),s<=1?(c=Math.round(p*s),m=p):(c=n,m=Math.round(n/s)),d["data-spotx_content_width"]=""+c,d["data-spotx_content_height"]=""+m}else a.logWarn("[SPOTX][renderer] PlayerSize auto adapt: bid.width and bid.height are incorrect");var u=a.getBidIdParameter("custom_override",e.renderer.config.outstream_options);if(u&&a.isPlainObject(u))for(var g in a.logMessage("[SPOTX][renderer] Custom beahavior."),u)u.hasOwnProperty(g)&&("channel_id"===g||"vast_url"===g||"content_page_url"===g||"ad_unit"===g?a.logWarn("[SPOTX][renderer] Custom beahavior: following option cannot be overrided: "+g):d["data-spotx_"+g]=u[g]);for(var _ in d)d.hasOwnProperty(_)&&r.setAttribute(_,d[_]);return r}(e);if(null!=e.renderer.config.outstream_function&&"function"==typeof e.renderer.config.outstream_function)e.renderer.config.outstream_function(e,t);else try{var r=a.getBidIdParameter("in_iframe",e.renderer.config.outstream_options);if(r&&"IFRAME"==window.document.getElementById(r).nodeName){var d=window.document.getElementById(r),i=d.contentDocument;!i&&d.contentWindow&&(i=d.contentWindow.document),i.body.appendChild(t)}else{var s=a.getBidIdParameter("slot",e.renderer.config.outstream_options);s&&window.document.getElementById(s)?window.document.getElementById(s).appendChild(t):window.document.getElementsByTagName("head")[0].appendChild(t)}}catch(e){a.logError("[SPOTX][renderer] Error:"+e.message)}}Object(i.registerBidder)(p)}}]);