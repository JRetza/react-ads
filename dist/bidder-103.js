(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{19:function(e,r,t){"use strict";t.r(r),t.d(r,"spec",(function(){return p}));var n=t(280),i=t(281),a=t(279),s=t(282);function d(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o={0:"title",2:"icon",3:"image",5:"sponsoredBy",4:"body",1:"cta"},c={title:{id:0,name:"title"},icon:{id:2,type:1,name:"img"},image:{id:3,type:3,name:"img"},sponsoredBy:{id:5,name:"data",type:1},body:{id:4,name:"data",type:2},cta:{id:1,type:12,name:"data"}},p={code:"adformOpenRTB",supportedMediaTypes:[i.c],isBidRequestValid:function(e){return!!e.params.mid},buildRequests:function(e,r){var t=r.refererInfo.referer,n=m(e,"params.adxDomain")||"adx.adform.net",i=navigator.userAgent,d=m(e,"params.pt")||m(e,"params.priceType")||"net",o=e[0].transactionId,p=m(e,"params.test"),u=m(e,"params.publisher"),l=m(e,"params.siteId"),v=s.b.getConfig("currency.adServerCurrency"),y=v&&[v],g=e.map((function(e,r){e.netRevenue=d;var t=a._map(e.nativeParams,(function(e,r){var t=c[r],n={required:1&e.required};if(t){var i,a,s,d;n.id=t.id;var o=e.aspect_ratios;if(o&&o[0]&&(i=(o=o[0]).min_width||0,a=o.ratio_height*i/o.ratio_width|0),e.sizes){var p=f(e.sizes);s=p[0],d=p[1]}return n[t.name]={len:e.len,type:t.type,wmin:i,hmin:a,w:s,h:d},n}})).filter(Boolean);return{id:r+1,tagid:e.params.mid,native:{request:{assets:t}}}})),b={id:r.auctionId,site:{id:l,page:t,publisher:u},device:{ua:i},source:{tid:o,fd:1},ext:{pt:d},cur:y,imp:g};return p&&(b.is_debug=!!p,b.test=1),a.deepAccess(r,"gdprConsent.gdprApplies")&&(b.user={ext:{consent:r.gdprConsent.consentString}},b.regs={ext:{gdpr:1&r.gdprConsent.gdprApplies}}),{method:"POST",url:"https://"+n+"/adx/openrtb",data:JSON.stringify(b),options:{contentType:"application/json"},bids:e}},interpretResponse:function(e,r){var t=r.bids;if(e.body){var n=e.body,a=n.seatbid,s=n.cur,d=f(a.map((function(e){return e.bid}))).reduce((function(e,r){return e[r.impid-1]=r,e}),[]);return t.map((function(e,r){var t=d[r];if(t)return{requestId:e.bidId,cpm:t.price,creativeId:t.crid,ttl:360,netRevenue:"net"===e.netRevenue,currency:s,mediaType:i.c,bidderCode:"adformOpenRTB",native:u(t)}})).filter(Boolean)}}};function u(e){var r=e.native,t=r.assets,n=r.link,i=r.imptrackers,a=r.jstracker,s={clickUrl:n.url,clickTrackers:n.clicktrackers||void 0,impressionTrackers:i||void 0,javascriptTrackers:a?[a]:void 0};return t.forEach((function(e){var r=o[e.id],t=r&&e[c[r].name];t&&(s[r]=t.text||t.value||{url:t.url,width:t.w,height:t.h})})),s}function m(e,r){for(var t,n=0;n<e.length;n++)if(t=a.deepAccess(e[n],r))return t}function f(e){var r;return(r=[]).concat.apply(r,d(e))}Object(n.registerBidder)(p)}}]);