(window.webpackJsonp=window.webpackJsonp||[]).push([[253],{240:function(e,i,t){"use strict";t.r(i),t.d(i,"spec",(function(){return p}));var a=t(279),n=t(281),r=t(280),d=t(290),s={0:"title",1:"cta",2:"icon",3:"image",4:"body",5:"sponsoredBy",6:"body2",7:"phone",8:"privacyLink",9:"displayurl",10:"rating",11:"address",12:"downloads",13:"likes",14:"price",15:"saleprice"},o={title:{id:0,name:"title"},body:{id:4,name:"data",type:2},body2:{id:6,name:"data",type:10},privacyLink:{id:8,name:"data",type:501},sponsoredBy:{id:5,name:"data",type:1},image:{id:3,type:3,name:"img"},icon:{id:2,type:1,name:"img"},displayurl:{id:9,name:"data",type:11},cta:{id:1,type:12,name:"data"},rating:{id:7,name:"data",type:3},address:{id:11,name:"data",type:5},downloads:{id:12,name:"data",type:5},likes:{id:13,name:"data",type:4},phone:{id:7,name:"data",type:8},price:{id:14,name:"data",type:6},saleprice:{id:15,name:"data",type:7}},p={code:"theadx",aliases:["theadx"],supportedMediaTypes:[n.b,n.d,n.c],isBidRequestValid:function(e){a.logInfo("theadx.isBidRequestValid",e);var i=!1;return e&&e.params&&(i=!(!e.params.pid||!e.params.tagId)),i},buildRequests:function(e,i){a.logInfo("theadx.buildRequests","validBidRequests",e,"bidderRequest",i);var t=[];return a.isEmpty(e)||(t=e.map((function(e){return{method:"POST",type:"POST",url:"".concat("https://ssp.theadx.com/request","?tagid=").concat(e.params.tagId),options:{withCredentials:!0},bidder:"theadx",referrer:encodeURIComponent(i.refererInfo.referer),data:v(e,i),mediaTypes:e.mediaTypes,requestId:i.bidderRequestId,bidId:e.bidId,adUnitCode:e.adUnitCode,auctionId:e.auctionId}}))),t},interpretResponse:function(e,i){a.logInfo("theadx.interpretResponse","serverResponse",e," request",i);var t=[];if(e.body){var r=e.body,d=r.seatbid;if(!a.isEmpty(d)&&!a.isEmpty(d[0].bid)){var p=d[0].bid[0],c=function(e){return void 0===e?null:parseInt(e)},u=null;p.ext&&(u=c(p.ext.ttl)?c(p.ext.ttl):2e3);var l=c(p.w),m=c(p.h),v=null,y=null,f=null,h=null;if(i.mediaTypes&&i.mediaTypes.video)y=p.ext.vast_url,f=n.d;else if(i.mediaTypes&&i.mediaTypes.banner)f=n.b,v=p.adm;else if(i.mediaTypes&&i.mediaTypes.native){f=n.c;var g=p.ext.native,b=g.assets,k=g.link,x=g.imptrackers,w=g.jstracker;h={clickUrl:k.url,clickTrackers:k.clicktrackers||p.ext.cliu?[]:void 0,impressionTrackers:x||p.nurl?[]:void 0,javascriptTrackers:w?[w]:void 0},p.nurl&&(h.impressionTrackers.unshift(p.ext.impu),h.impressionTrackers.unshift(p.nurl),h.clickTrackers&&h.clickTrackers.unshift(p.ext.cliu)),b.forEach((function(e){var i=s[e.id],t=i&&e[o[i].name];t&&(h[i]=t.text||t.value||{url:t.url,width:t.w,height:t.h})}))}var I={bidderCode:"theadx",requestId:i.bidId,cpm:p.price,width:0|l,height:0|m,ad:v,ttl:u||3e3,creativeId:p.crid,netRevenue:!0,currency:r.cur,mediaType:f,native:h};f==n.d&&y&&(I.vastUrl=y,I.videoCacheKey=p.ext.rid),t.push(I)}}return t},getUserSyncs:function(e,i){a.logInfo("theadx.getUserSyncs","syncOptions",e,"serverResponses",i);var t=[];return e.iframeEnabled||e.pixelEnabled?(i.forEach((function(i){var n=a.deepAccess(i,"body.ext.sync.iframe"),r=a.deepAccess(i,"body.ext.sync.image");e.iframeEnabled&&n&&n.forEach((function(e){t.push({type:"iframe",url:e})})),e.pixelEnabled&&r&&r.forEach((function(e){t.push({type:"image",url:e})}))})),t):t}},c=function(e,i){var t=Object(d.c)(i.refererInfo.referer,{decodeSearchAsString:!0}),a={domain:t.hostname,page:t.href,id:e.params.wid,publisher:{id:e.params.pid}};if(t.search&&(a.search=t.search),document){var n=document.getElementsByTagName("meta").keywords;n&&n.content&&(a.keywords=n.content)}return a};var u=function(e,i){return e.bidId},l=function(e,i){var t=null,n=null,r=[],d=e.mediaTypes;d&&(d.banner&&d.banner.sizes||d.video&&d.video.sizes)?r=d.banner?d.banner.sizes:d.video.sizes:a.isEmpty(e.sizes)||(r=e.sizes);var s=a.parseSizesInput(r);if(!a.isEmpty(s)&&null!=s[0]){var o=s[0].split("x");t=parseInt(o[0]),n=parseInt(o[1])}return{w:t,h:n}},m=function(e,i){var t=e.mediaTypes,n=null,r=null,d=null;t&&t.video?r=function(e,i){var t=l(e);return{w:t.w,h:t.h}}(e):t&&t.banner?n=function(e,i){var t=l(e);return{w:t.w,h:t.h}}(e):t&&t.native&&(d=function(e,i){return{request:{assets:a._map(e.mediaTypes.native,(function(e,i){var t=o[i],a={required:1&e.required};if(t)return a.id=t.id,a[t.name]={len:e.len,wmin:e.sizes&&e.sizes[0],hmin:e.sizes&&e.sizes[1],type:t.type},a})).filter(Boolean)}}}(e));var s={id:e.index,tagid:e.params.tagId+""};return n&&(s.banner=n),r&&(s.video=r),d&&(s.native=d),s},v=function(e,i){var t,n,r={id:u(e),site:c(e,i),device:(t={js:1,language:"language"in navigator?navigator.language:null,ua:"userAgent"in navigator?navigator.userAgent:null,devicetype:/(ios|ipod|ipad|iphone|android)/i.test(navigator.userAgent)?1:/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(navigator.userAgent)?3:2,dnt:a.getDNT()?1:0},n=navigator.connection||navigator.webkitConnection,n&&n.type&&(t.connectiontype=n.type,n.downlinkMax&&(t.connectionDownlinkMax=n.downlinkMax)),t),imp:[m(e)]};return JSON.stringify(r)};Object(r.registerBidder)(p)}}]);