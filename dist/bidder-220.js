(window.webpackJsonp=window.webpackJsonp||[]).push([[220],{294:function(e,t,r){"use strict";r.r(t),r.d(t,"spec",(function(){return p}));var a=r(0),s=r(2),d=r(16),n=r(55),o=r(13),i=r(57);function c(e){return{pubTag:e?"https://pubtag.stage.showheroes.com/publishertag.js":"https://static.showheroes.com/publishertag.js",vlHost:e?"https://video-library.stage.showheroes.com":"https://video-library.showheroes.com"}}var p={code:"showheroes-bs",aliases:["showheroesBs"],supportedMediaTypes:[o.d,o.b],isBidRequestValid:function(e){return!!e.params.playerId},buildRequests:function(e,t){var r=e[0].params.contentPageUrl||t.refererInfo.referer,d=!!e[0].params.stage,n="outstream"===a.deepAccess(e[0],"mediaTypes.video.context"),i=a.deepAccess(e[0],"params.outstreamOptions.customRender"),c=a.deepAccess(e[0],"params.outstreamOptions.slot")||a.deepAccess(e[0],"params.outstreamOptions.iframe"),p=a.deepAccess(e[0],"renderer"),u=a.deepAccess(e[0],"params.outstreamOptions"),m=!!e[0].mediaTypes.banner||n&&!(i||p||c),h=e.map((function(e){var r=a.getBidIdParameter("vpaidMode",e.params),s=1===e.sizes.length?e.sizes[0]:e.sizes;if(s&&!s.length){var d,n=a.deepAccess(e,"mediaTypes.video.playerSize");d=a.isArray(n)?n:e.mediaTypes.banner.sizes,a.isArray(d[0])?s=d[0]:a.isNumber(d[0])&&(s=d)}var i=a.deepAccess(e,"mediaTypes.video.context"),c=2;return r&&"instream"===i&&(c=1),(m||"outstream"===i)&&(c=5),{type:c,bidId:e.bidId,mediaType:m?o.b:o.d,context:i,playerId:a.getBidIdParameter("playerId",e.params),auctionId:t.auctionId,bidderCode:"showheroes-bs",gdprConsent:t.gdprConsent,start:+new Date,timeout:3e3,video:{width:s[0],height:s[1]},params:e.params}}));return{url:d?"https://bid-service.stage.showheroes.com/api/v1/bid":"https://bs1.showheroes.com/api/v1/bid",method:"POST",options:{contentType:"application/json",accept:"application/json"},data:{user:[],meta:{pageURL:encodeURIComponent(r),vastCacheEnabled:!!s.b.getConfig("cache")&&!m&&!u||!1,isDesktop:a.getWindowTop().document.documentElement.clientWidth>700,xmlAndTag:!(!n||!i)||!1,stage:d||void 0},requests:h,debug:e[0].params.debug||!1}}},interpretResponse:function(e,t){return function(e,t){if(e&&(!Array.isArray(e.bids)||e.bids.length<1))return[];var r=[],s={};return(t.requests||[]).forEach((function(e){s[e.bidId]=e})),e.bids.forEach((function(e){var n=s[e.bidId],i=n.params,p={};if(p.cpm=e.cpm,p.requestId=e.bidId,p.currency=e.currency,p.mediaType=n.mediaType||o.d,p.ttl=300,p.creativeId="c_"+e.bidId,p.netRevenue=!0,p.width=e.video.width,p.height=e.video.height,e.vastXml&&(p.vastXml=e.vastXml,p.adResponse={content:e.vastXml}),e.vastTag&&(p.vastUrl=e.vastTag),n.mediaType===o.b)p.ad=function(e,t,r){var a=c(!!r.meta.stage);return'<html>\n    <head></head>\n    <body>\n      <script async src="'.concat(a.pubTag,'"\n              data-canvas=""\n              data-noad-passback-listener=""\n              onload="window.ShowheroesTag=this"\n              data-player-host="').concat(a.vlHost,'"><\/script>\n      <div class="showheroes-spot"\n            data-debug="').concat(r.debug?"1":"",'"\n            data-player="').concat(t.playerId,'"\n            data-ad-vast-tag="').concat(e.vastTag,'"></div>\n    </body>\n  </html>')}(e,n,t);else if("outstream"===n.context){var m=d.a.install({id:e.bidId,url:"//",config:{playerId:n.playerId,width:e.video.width,height:e.video.height,vastUrl:e.vastTag,vastXml:e.vastXml,debug:t.debug,isStage:!!t.meta.stage,customRender:a.getBidIdParameter("customRender",i.outstreamOptions),slot:a.getBidIdParameter("slot",i.outstreamOptions),iframe:a.getBidIdParameter("iframe",i.outstreamOptions)}});m.setRender(u),p.renderer=m}r.push(p)})),r}(e.body,t.data)},getUserSyncs:function(e,t){var r=[];if(!t.length||!t[0].body.userSync)return r;var a=t[0].body.userSync;return e.iframeEnabled&&(a.iframes||[]).forEach((function(e){r.push({type:"iframe",url:e})})),e.pixelEnabled&&(a.pixels||[]).forEach((function(e){r.push({type:"image",url:e})})),r}};function u(e){var t=function(e){var t=c(a.getBidIdParameter("isStage",e.renderer.config)),r=window.document.createDocumentFragment(),s=Object(i.a)(t.pubTag,"outstream",(function(){window.ShowheroesTag=this}));s.setAttribute("data-player-host",t.vlHost);var d=window.document.createElement("div");return d.setAttribute("class","showheroes-spot"),d.setAttribute("data-player",a.getBidIdParameter("playerId",e.renderer.config)),d.setAttribute("data-debug",a.getBidIdParameter("debug",e.renderer.config)),d.setAttribute("data-ad-vast-tag",a.getBidIdParameter("vastUrl",e.renderer.config)),d.setAttribute("data-stream-type","outstream"),r.appendChild(d),r.appendChild(s),r}(e);if("function"==typeof e.renderer.config.customRender)e.renderer.config.customRender(e,t);else try{var r=a.getBidIdParameter("iframe",e.renderer.config);if(r&&"IFRAME"===window.document.getElementById(r).nodeName){var s=window.document.getElementById(r);return void(s.contentDocument||s.contentWindow&&s.contentWindow.document).body.appendChild(t)}var d=a.getBidIdParameter("slot",e.renderer.config);d&&window.document.getElementById(d)?window.document.getElementById(d).appendChild(t):d&&a.logError("[ShowHeroes][renderer] Error: spot not found")}catch(e){a.logError("[ShowHeroes][renderer] Error:"+e.message)}}Object(n.registerBidder)(p)}}]);