(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{226:function(e,t,n){"use strict";n.r(t);var i=n(287),o=n(284),r=n(292),a=n(283);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(279),p=Object(a.b)(0),f=o.EVENTS,l=f.AUCTION_INIT,b=f.AUCTION_END,y=f.BID_REQUESTED,g=f.BID_ADJUSTMENT,v=f.BIDDER_DONE,I=f.BID_WON,T=f.BID_RESPONSE,h=f.BID_TIMEOUT,m={},E={};function O(e){return"/".concat(m.pubId,"/").concat(m.siteId,"/").concat(e.adUnitCode.toLowerCase())}function D(e){return e.responseTimestamp?e.responseTimestamp-e.requestTimestamp:-1}function A(e){return e.cpm?Math.round(100*e.cpm):0}function w(e,t){var n=E[e];n.queue=n.queue.filter((function(e){return e.bidid!==t||n.stats[t].data.p!==e.p})),n.queue.push(d.deepClone(n.stats[t].data)),n.qTimeout||(n.qTimeout=setTimeout((function(){!function(e){var t=E[e],n=t.queue;t.queue=[],t.qTimeout=!1,j.sendData(t,n)}(e)}),m.delay))}function q(e,t,n){var i=E[e];return i.stats[t].data=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i.stats[t].data,{},n),w(e,t),N("Updated Bid Stats: ",i.stats[t]),i.stats[t]}function _(e){E[e.auctionId]=function(e){return{id:e.auctionId,start:e.timestamp,timeout:e.timeout,adUnits:{},stats:{},queue:[],qTimeout:!1}}(e),function(){for(var e in E){var t=E[e];Date.now()-t.start>36e5&&delete E[e]}}(),N("Auction Init",e)}function S(e){var t=E[e.auctionId];e.bids.forEach((function(n){t=E[n.auctionId];var i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e.width?{width:e.width,height:e.height}:{width:e.sizes[0][0],height:e.sizes[0][1]};return{bidid:e.bidId||e.requestId,p:n,buyerid:e.bidder.toLowerCase(),bid:A(e),adunit_code:O(e),s:"".concat(i.width,"x").concat(i.height),latency:D(e),response:t,jsLatency:D(e),buyername:e.bidder.toLowerCase()}}(n,1,1);t.stats[i.bidid]={id:i.bidid,adUnitCode:n.adUnitCode,data:i},w(e.auctionId,i.bidid)})),N("Bids Requested ",[])}var j=u(Object(i.a)({url:"apex.go.sonobi.com/keymaker",analyticsType:"endpoint"}),{track:function(e){var t=e.eventType,n=e.args;switch(t){case l:_(n);break;case y:S(n);break;case g:!function(e){N("Bid Adjustment",e)}(n);break;case v:!function(e){N("Bidder Done",e)}(n);break;case b:!function(e){var t={};e.bidsReceived.forEach((function(e){t[e.adUnitCode]?t[e.adUnitCode].cpm<e.cpm&&(t[e.adUnitCode]={bidId:e.requestId,cpm:e.cpm}):t[e.adUnitCode]={bidId:e.requestId,cpm:e.cpm}})),e.adUnitCodes.forEach((function(n){if(t[n]){var i=t[n].bidId;q(e.auctionId,i,{response:4})}})),N("Auction End",e),N("Auction Cache",E[e.auctionId].stats)}(n);break;case I:!function(e){var t=q(e.auctionId,e.requestId,{p:3,response:6});N("Bid Won ",e),N("Bid Update Result: ",t)}(n);break;case T:!function(e){var t=e.auctionId,n=e.requestId,i=e.cpm,o=e.size,r=e.timeToRespond;q(t,n,{bid:i,s:o,jsLatency:r,latency:r,p:2,response:9}),N("Bid Response ",e)}(n);break;case h:!function(e){var t=e.auctionId,n=e.bidId;N("Bid Timeout ",e),q(t,n,{p:2,response:0,latency:e.timeout,jsLatency:e.timeout})}(n);break;default:!function(e,t){N("Other Event: "+e,t)}(t,n)}}});function N(e,t){d.logInfo(B(e),t)}function U(e){d.logError(B(e))}function B(e){return"Sonobi Prebid Analytics: "+e}j.originEnableAnalytics=j.enableAnalytics,j.enableAnalytics=function(e){this.initConfig(e)&&(N("Analytics adapter enabled",m),j.originEnableAnalytics(e))},j.initConfig=function(e){var t=!0;return(m={}).options=d.deepClone(e.options),m.pubId=m.options.pubId||null,m.siteId=m.options.siteId||null,m.delay=m.options.delay||200,m.pubId||(U('"options.pubId" is empty'),t=!1),m.siteId||(U('"options.siteId" is empty'),t=!1),m.server="apex.go.sonobi.com/keymaker",m.host=m.options.host||window.location.hostname,this.initOptions=m,t},j.getOptions=function(){return m},j.sendData=function(e,t){var n="https://"+m.server+"?pageviewid="+e.id+"&corscred=1&pubId="+m.pubId+"&siteId="+m.siteId;p(n,(function(){N("Auction ["+e.id+"] sent ",t)}),JSON.stringify(t),{method:"POST",contentType:"text/plain"})},r.default.registerAnalyticsAdapter({adapter:j,code:"sonobi"}),t.default=j},287:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n(284),o=n(283);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=n(291),c=n(279),s=i.EVENTS,d=s.AUCTION_INIT,p=s.AUCTION_END,f=s.REQUEST_BIDS,l=s.BID_REQUESTED,b=s.BID_TIMEOUT,y=s.BID_RESPONSE,g=s.NO_BID,v=s.BID_WON,I=s.BID_ADJUSTMENT,T=s.BIDDER_DONE,h=s.SET_TARGETING,m=s.AD_RENDER_FAILED,E=s.ADD_AD_UNITS;function O(e){var t,n=e.url,i=e.analyticsType,s=e.global,O=e.handler,D=[],A=0,w=!0;return function(){if(w){for(var e=0;e<D.length;e++)D[e]();D.push=function(e){e()},w=!1}c.logMessage("event count sent to ".concat(s,": ").concat(A))}(),{track:function(e){var t=e.eventType,n=e.args;"bundle"===this.getAdapterType()&&window[s](O,t,n);"endpoint"===this.getAdapterType()&&q.apply(void 0,arguments)},enqueue:_,enableAnalytics:S,disableAnalytics:function(){c._each(t,(function(e,t){u.off(t,e)})),this.enableAnalytics=this._oldEnable?this._oldEnable:S},getAdapterType:function(){return i},getGlobal:function(){return s},getHandler:function(){return O},getUrl:function(){return n}};function q(e){var t=e.eventType,i=e.args,r=e.callback;Object(o.a)(n,r,JSON.stringify({eventType:t,args:i}))}function _(e){var t=e.eventType,n=e.args,i=this;s&&window[s]&&t&&n?this.track({eventType:t,args:n}):D.push((function(){A++,i.track({eventType:t,args:n})}))}function S(e){var n,i=this,o=this;"object"!==a(e)||"object"!==a(e.options)||(void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling))?(u.getEvents().forEach((function(e){if(e){var t=e.eventType,n=e.args;t!==b&&_.call(o,{eventType:t,args:n})}})),r(n={},f,(function(e){return i.enqueue({eventType:f,args:e})})),r(n,l,(function(e){return i.enqueue({eventType:l,args:e})})),r(n,y,(function(e){return i.enqueue({eventType:y,args:e})})),r(n,g,(function(e){return i.enqueue({eventType:g,args:e})})),r(n,b,(function(e){return i.enqueue({eventType:b,args:e})})),r(n,v,(function(e){return i.enqueue({eventType:v,args:e})})),r(n,I,(function(e){return i.enqueue({eventType:I,args:e})})),r(n,T,(function(e){return i.enqueue({eventType:T,args:e})})),r(n,h,(function(e){return i.enqueue({eventType:h,args:e})})),r(n,p,(function(e){return i.enqueue({eventType:p,args:e})})),r(n,m,(function(e){return i.enqueue({eventType:m,args:e})})),r(n,E,(function(e){return i.enqueue({eventType:E,args:e})})),r(n,d,(function(t){t.config="object"===a(e)&&e.options||{},i.enqueue({eventType:d,args:t})})),t=n,c._each(t,(function(e,t){u.on(t,e)}))):c.logMessage('Analytics adapter for "'.concat(s,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return c.logMessage('Analytics adapter for "'.concat(s,'" already enabled, unnecessary call to `enableAnalytics`.'))}}}}}]);