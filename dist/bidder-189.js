(window.webpackJsonp=window.webpackJsonp||[]).push([[189],{151:function(e,r,i){"use strict";i.r(r),i.d(r,"spec",(function(){return m}));var t=i(280),a=i(279),s=i(290),n=i(281),c=i(282),d={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},DESC:{ID:5,KEY:"data",TYPE:2},PRICE:{ID:6,KEY:"price",TYPE:6},SALEPRICE:{ID:7,KEY:"saleprice",TYPE:7},DISPLAYURL:{ID:8,KEY:"displayurl",TYPE:11},CTA:{ID:9,KEY:"cta",TYPE:12},BODY:{ID:10,KEY:"body",TYPE:2},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1}},o=1,l=3,u=!1,g=[{id:d.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:d.TITLE.ID,required:!0},{id:d.IMAGE.ID,required:!0}],p={},h={};a._each(d,(function(e){p[e.ID]=e.KEY})),a._each(d,(function(e){h[e.KEY]=e}));var m={VERSION:"1.4",code:"mgid",supportedMediaTypes:[n.b,n.c],reId:/^[1-9][0-9]*$/,NATIVE_ASSET_ID_TO_KEY_MAP:p,NATIVE_ASSET_KEY_TO_ASSET_MAP:h,isBidRequestValid:function(e){var r=a.deepAccess(e,"mediaTypes.banner"),i=a.deepAccess(e,"mediaTypes.native"),t=a.isPlainObject(i);if(t){var s=a.deepAccess(e,"nativeParams"),n=0;if(a.isPlainObject(s))for(var c in s){var d=s[c],o=m.NATIVE_ASSET_KEY_TO_ASSET_MAP.hasOwnProperty(c);if(o&&n++,!a.isPlainObject(d)||!o&&a.deepAccess(d,"required")){t=!1;break}}t=t&&n>0}var l=a.isPlainObject(r);if(l){var u=a.deepAccess(r,"sizes");l=a.isArray(u)&&u.length>0;for(var g=0;l&&g<u.length;g++)l=2===u[g].length}var p=Number(e.params.accountId),h=Number(e.params.placementId);return(l||t)&&a.isPlainObject(e.params)&&!!e.adUnitCode&&a.isStr(e.adUnitCode)&&(!(h>0)||0===e.params.placementId.toString().search(m.reId))&&!!p&&p>0&&0===e.params.accountId.toString().search(m.reId)},buildRequests:function(e,r){if(a.logInfo("[MGID info]: buildRequests"),0!==e.length){var i=function(){var e,r,i,t,a,s,n;for(e=window,r=e.document,i=r.location.href,t=r.referrer,a=0,n=new Date;e!==e.parent;)try{s=e.parent,i=s.location.href,t=s.document.referrer,e=s}catch(r){a=top!==e.parent?2:1;break}return{location:i,referrer:t||"",masked:a,wWidth:e.innerWidth,wHeight:e.innerHeight,date:n.toUTCString(),timeOffset:n.getTimezoneOffset()}}(),t=i.location||a.deepAccess(r,"refererInfo.referer")||a.deepAccess(r,"refererInfo.canonicalUrl"),d=s.c(t).hostname,o=function(e){if("localhost"==e)return"localhost";var r=null;try{var i=/[-\w]+\.([-\w]+|[-\w]{3,}|[-\w]{1,3}\.[-\w]{2})$/i.exec(e);if(null!=i&&i.length>0){r=i[0];for(var t=1;t<i.length;t++)i[t].length>r.length&&(r=i[t])}}catch(e){r=null}return r}(d)||d,l=v(e,"params.accountId"),g=function(e){try{return localStorage.getItem(e)}catch(e){return null}}("mgMuidn"),p=(v(e,"params.bidUrl")||"https://prebid.mgid.com/prebid/")+l;a.isStr(g)&&g.length>0&&(p+="?muid="+g);var h=[v(e,"params.currency")||v(e,"params.cur")||c.b.getConfig("currency.adServerCurrency")||"USD"],b="https:"===window.location.protocol?1:0,T=[];if(e.forEach((function(e){var r=a.deepAccess(e,"params.placementId")||0;r=r?r+"/"+e.adUnitCode:e.adUnitCode;var i={id:e.bidId,tagid:r,secure:b},t=a.deepAccess(e,"params.bidFloor")||a.deepAccess(e,"params.bidfloor")||0;for(var s in t&&a.isNumber(t)&&(i.bidfloor=t),e.mediaTypes)switch(s){case n.b:i.banner=f(e),T.push(i);break;case n.c:var c=E(e.nativeParams);u||(i.native={request:c},T.push(i))}})),0!==T.length){var A={id:a.deepAccess(r,"bidderRequestId"),site:{domain:o,page:t},cur:h,geo:{utcoffset:i.timeOffset},device:{ua:navigator.userAgent,js:1,dnt:"yes"===navigator.doNotTrack||"1"===navigator.doNotTrack||"1"===navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:I()},ext:{mgid_ver:m.VERSION,prebid_ver:pbjs.version},imp:T};return r&&r.gdprConsent&&(A.user={ext:{consent:r.gdprConsent.consentString}},A.regs={ext:{gdpr:r.gdprConsent.gdprApplies?1:0}}),i.referrer&&(A.site.ref=i.referrer),a.logInfo("[MGID info]: buildRequest:",A),{method:"POST",url:p,data:JSON.stringify(A)}}}},interpretResponse:function(e,r){if(a.logInfo("[MGID info]: interpretResponse",e),null!=e&&null!=e.body&&""!==e.body&&a.isArray(e.body.seatbid)&&e.body.seatbid.length){var i=[],t=a.deepAccess(e.body,"ext.muidn");return a.isStr(t)&&t.length>0&&function(e,r){try{localStorage.setItem(e,r)}catch(e){return null}}("mgMuidn",t),e.body.seatbid.forEach((function(r){r.bid.forEach((function(r){var t=function(e,r){a.isStr(r)&&""!==r||(r="USD");var i={requestId:e.impid,ad:e.adm,cpm:e.price,creativeId:e.adid,currency:r,dealId:e.dealid||"",width:e.w,height:e.h,mediaType:"banner",netRevenue:!0,ttl:e.ttl||300,nurl:e.nurl||"",burl:e.burl||"",isBurl:a.isStr(e.burl)&&e.burl.length>0};switch(function(e,r){"native"===a.deepAccess(e,"ext.crtype")?r.mediaType=n.c:r.mediaType=n.b}(e,i),i.mediaType){case n.b:break;case n.c:!function(e,r){if(r.native={},e.hasOwnProperty("adm")){var i="";try{i=JSON.parse(e.adm)}catch(e){return void a.logWarn("[MGID warn]: Error: Cannot parse native response for ad response: "+r.adm)}if(i&&i.native&&i.native.assets&&i.native.assets.length>0){r.mediaType=n.c;for(var t=0,s=i.native.assets.length;t<s;t++)switch(i.native.assets[t].id){case d.TITLE.ID:r.native.title=i.native.assets[t].title&&i.native.assets[t].title.text;break;case d.IMAGE.ID:r.native.image={url:i.native.assets[t].img&&i.native.assets[t].img.url,height:i.native.assets[t].img&&i.native.assets[t].img.h,width:i.native.assets[t].img&&i.native.assets[t].img.w};break;case d.ICON.ID:r.native.icon={url:i.native.assets[t].img&&i.native.assets[t].img.url,height:i.native.assets[t].img&&i.native.assets[t].img.h,width:i.native.assets[t].img&&i.native.assets[t].img.w};break;case d.SPONSOREDBY.ID:case d.SPONSORED.ID:case d.PRICE:case d.SALEPRICE.ID:case d.DESC.ID:case d.BODY.ID:case d.DISPLAYURL.ID:case d.CTA.ID:r.native[m.NATIVE_ASSET_ID_TO_KEY_MAP[i.native.assets[t].id]]=i.native.assets[t].data&&i.native.assets[t].data.value}r.native.clickUrl=i.native.link&&i.native.link.url,r.native.clickTrackers=i.native.link&&i.native.link.clicktrackers||[],r.native.impressionTrackers=i.native.imptrackers||[],r.native.jstracker=i.native.jstracker||[],r.width=0,r.height=0}}}(e,i)}return i}(r,e.body.cur);t.mediaType===n.c&&a.isEmpty(t.native)||i.push(t)}))})),a.logInfo("[MGID info]: interpretedResponse",i),i}},onBidWon:function(e){var r=a.deepAccess(e,"adserverTargeting.hb_pb")||"";a.isStr(e.nurl)&&""!==e.nurl&&(e.nurl=e.nurl.replace(/\${AUCTION_PRICE}/,r),a.triggerPixel(e.nurl)),e.isBurl&&(e.mediaType===n.b?e.ad=e.ad.replace(/\${AUCTION_PRICE}/,r):(e.burl=e.burl.replace(/\${AUCTION_PRICE}/,r),a.triggerPixel(e.burl))),a.logInfo("[MGID info]: onBidWon")},getUserSyncs:function(e,r){a.logInfo("[MGID info]: getUserSyncs")}};function v(e,r){for(var i,t=0;t<e.length;t++)if(i=a.deepAccess(e[t],r))return i}function I(){var e=navigator.language?"language":"userLanguage",r=navigator[e].split("-")[0];return 2===r.length||3===r.length?r:""}function f(e){var r=a.deepAccess(e,"mediaTypes.banner.sizes"),i=[];if(r.length>1)for(var t=0;t<r.length;t++)2===r[t].length&&i.push({w:r[t][0],h:r[t][1]});var s={w:r&&r[0][0],h:r&&r[0][1]};return i.length&&(s.format=i),s}function E(e){var r={plcmtcnt:1,assets:[]};for(var i in e){var t={};if(e.hasOwnProperty(i)&&!(r.assets&&r.assets.length>0&&r.assets.hasOwnProperty(i)))switch(i){case d.TITLE.KEY:t={id:d.TITLE.ID,required:e[i].required?1:0,title:{len:e[i].len||e[i].length||80}};break;case d.IMAGE.KEY:var s=e[i].wmin||e[i].minimumWidth||(a.isArray(e[i].minsizes)&&e[i].minsizes.length>0?e[i].minsizes[0]:0),n=e[i].hmin||e[i].minimumHeight||(a.isArray(e[i].minsizes)&&e[i].minsizes.length>1?e[i].minsizes[1]:0);t={id:d.IMAGE.ID,required:e[i].required?1:0,img:{type:l,w:e[i].w||e[i].width||(a.isArray(e[i].sizes)&&e[i].sizes.length>0?e[i].sizes[0]:0),h:e[i].h||e[i].height||(a.isArray(e[i].sizes)&&e[i].sizes.length>1?e[i].sizes[1]:0),mimes:e[i].mimes,ext:e[i].ext}},s>0&&(t.img.wmin=s),n>0&&(t.img.hmin=n),t.img.w||(t.img.w=492),t.img.h||(t.img.h=328);break;case d.ICON.KEY:(t={id:d.ICON.ID,required:e[i].required?1:0,img:{type:o,w:e[i].w||e[i].width||(a.isArray(e[i].sizes)&&e[i].sizes.length>0?e[i].sizes[0]:0),h:e[i].h||e[i].height||(a.isArray(e[i].sizes)&&e[i].sizes.length>0?e[i].sizes[1]:0)}}).img.w||(t.img.w=50),t.img.h||(t.img.h=50);break;case d.SPONSORED.KEY:case d.SPONSOREDBY.KEY:case d.PRICE.KEY:case d.SALEPRICE.KEY:case d.DESC.KEY:case d.BODY.KEY:case d.DISPLAYURL.KEY:case d.CTA.KEY:t=b(m.NATIVE_ASSET_KEY_TO_ASSET_MAP[i],e);break;default:if(e[i].required)return void(u=!0)}t.id&&(r.assets[r.assets.length]=t)}var c=g.length,p=0;return g.forEach((function(e){for(var i=r.assets.length,t=0;t<i;t++){if(e.id===r.assets[t].id){p++;break}if(4===e.id&&11===r.assets[t].id&&a.deepAccess(r.assets[t],"data.type")===e.data.type){p++;break}}})),u=c!==p,r}function b(e,r){var i=e.KEY;return{id:e.ID,required:r[i].required?1:0,data:{type:e.TYPE,len:r[i].len,ext:r[i].ext}}}Object(t.registerBidder)(m)}}]);